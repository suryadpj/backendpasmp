(self.webpackChunk=self.webpackChunk||[]).push([[9041],{37338:function(e,t,a){var r={"./admin/account_access_pagination_controller.js":79315,"./admin/change_folder_owner_controller.js":70673,"./admin/change_owner_controller.js":46353,"./admin/custom_url_btn_controller.js":35156,"./admin/custom_url_modal_controller.js":68721,"./admin/entry_controller.js":64590,"./admin/faq_controller.js":83120,"./admin/import_controller.js":72153,"./admin/profile_controller.js":87965,"./admin/profile_edit_account_access_controller.js":89093,"./admin/qr_filters_controller.js":92113,"./admin/qrsettings_controller.js":62316,"./admin/refer_controller.js":69890,"./admin/share_folder_controller.js":95451,"./admin/support_controller.js":28318,"./admin/unique_url_btn_controller.js":54109,"./admin/unique_url_modal_controller.js":35751,"./art-qr-code/art_qr_code_controller.js":85528,"./blog/blog_rating_controller.js":66547,"./blog/blog_search_controller.js":99331,"./domain/verify_domain_controller.js":19484,"./faq_controller.js":62264,"./folders/all_folders_controller.js":97713,"./folders/make_copy_btn_controller.js":44179,"./folders/make_copy_modal_controller.js":84523,"./folders/move_btn_controller.js":46935,"./folders/move_folder_modal_controller.js":90173,"./folders/new_folder_controller.js":13725,"./footer_controller.js":78219,"./form_iframe_controller.js":21826,"./get_scalar_value_controller.js":23366,"./hide_flash_message_controller.js":98752,"./integration_controller.js":83403,"./login/login_controller.js":6862,"./modal_controller.js":52117,"./modal_iframe_youtube_controller.js":91993,"./museum/qr_museum_controller.js":54974,"./museum/scroll_position_controller.js":99418,"./nav_controller.js":22623,"./new_landing_controller.js":48770,"./payment/main_controller.js":11609,"./prices/mainpage_price_controller.js":97302,"./prices/product_price_controller.js":42435,"./promocodes/content_controller.js":21071,"./promocodes/form_email_controller.js":56857,"./promocodes/form_validate_controller.js":80491,"./promocodes/list_controller.js":45571,"./qr_count_controller.js":10732,"./subscribes/subscribe_admin_controller.js":17051,"./subscribes/subscribe_controller.js":22026,"./ticket-app/page_controller.js":16647,"./utils/getLocale.js":55704};function s(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}s.keys=function(){return Object.keys(r)},s.resolve=i,e.exports=s,s.id=37338},38205:function(e,t,a){"use strict";var r=a(6599);t.Z={"symfony--ux-react--react":new Promise(((e,t)=>e({default:class extends r.Qr{constructor(e){super(e),this.__stimulusLazyController=!0}initialize(){this.application.controllers.find((e=>e.identifier===this.identifier&&e.__stimulusLazyController))||Promise.all([a.e(3935),a.e(1865)]).then(a.bind(a,31865)).then((e=>{this.application.register(this.identifier,e.default)}))}}})))}},79315:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["table","pagination"];connect(){this.addEventListeners()}addEventListeners(){this.paginationTarget.addEventListener("click",this.handlePaginationClick.bind(this))}handlePaginationClick(e){if(e.preventDefault(),"A"===e.target.tagName){const t=e.target.getAttribute("href");i().get(t).then((e=>{const t=document.createElement("div");t.innerHTML=e.data;const a=t.querySelector("#userTable");this.tableTarget.innerHTML=a.innerHTML;this.paginationTarget.querySelectorAll("a").forEach((e=>{e.classList.remove("active")}));const r=t.querySelector(".navigation");this.paginationTarget.innerHTML=r.innerHTML;const s=t.querySelector(".navigation .current");if(s){const e=s.innerText.trim(),t=this.paginationTarget.querySelector(`a[data-page="${e}"]`);t&&t.classList.add("active")}})).catch((e=>{console.error("Error:",e)}))}}}},70673:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["changeOwnerBtn","email","alertError","emailError"];async emailInput(e){const t=new FormData;t.append("email",e.target.value);let a=document.querySelector("[data-locale]").getAttribute("data-locale");t.append("locale",a);try{const{data:e}=await i().post("/entry/email_exists",t);e.error?(this.showErrorMessage(this.emailErrorTarget),this.changeOwnerBtnTarget.setAttribute("disabled","")):(this.emailErrorTarget.classList.add("d-none"),this.changeOwnerBtnTarget.removeAttribute("disabled"))}catch(e){this.showErrorMessage(this.emailErrorTarget),this.changeOwnerBtnTarget.setAttribute("disabled","")}}showErrorMessage(e){e.classList.remove("d-none")}async moveFolder(e){let t=document.querySelector("[data-locale]").getAttribute("data-locale");const a=new FormData;a.append("folderId",e.target.dataset.id),a.append("email",this.emailTarget.value),a.append("_locale",t);try{await i().post("/entry/folder/change_owner",a),window.location.href=e.target.dataset.href}catch(e){e.response.data?.error&&this.showErrorAlert(e.response.data.error)}}showErrorAlert(e){this.alertErrorTarget.classList.remove("d-none");const t=this.alertErrorTarget.querySelector(".error");t.innerHTML=e,setTimeout((()=>{this.alertErrorTarget.classList.add("d-none"),t.innerHTML=""}),5e3)}closeAlert(e){e.currentTarget.parentNode.classList.add("d-none")}}},46353:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(20296),o=a.n(n),l=a(36468);t.default=class extends r.Qr{static targets=["qrcode","qrEntry","emailError","changeOwnerBtn","deleteQrBtn","email","cancel"];changeOwnerModal=new l.Modal("#changeOwnerModal");async connect(){a.e(9330).then(a.t.bind(a,9330,23)).then((e=>{this.qrcodeTargets.forEach((t=>{new e.default({data:t.dataset.link}).append(t)}))})),this.emailInput=await o()(this.emailInput.bind(this),500)}deleteQr(e){e.currentTarget.parentNode.parentNode.remove(),this.qrEntryTargets.length||this.changeOwnerBtnTarget.setAttribute("disabled",""),1===this.qrEntryTargets.length&&this.deleteQrBtnTarget.classList.add("d-none")}async emailInput(e){const t=new FormData;t.append("email",e.target.value);try{const{data:e}=await i().post("/entry/email_exists",t);e.error?(this.showErrorMessage(this.emailErrorTarget),this.changeOwnerBtnTarget.setAttribute("disabled","")):(this.emailErrorTarget.classList.add("d-none"),this.qrEntryTargets.length&&this.changeOwnerBtnTarget.removeAttribute("disabled"))}catch(e){this.showErrorMessage(this.emailErrorTarget),this.changeOwnerBtnTarget.setAttribute("disabled","")}}showErrorMessage(e){e.classList.remove("d-none")}changeOwnerModalOpen(){document.querySelector("#moveToEmail").innerHTML=this.emailTarget.value,document.querySelector("#moveCount").innerHTML=this.qrEntryTargets.length}async moveQrCodes(){const e=new FormData;this.qrEntryTargets.forEach((t=>{e.append("entries[]",t.dataset.id)})),e.append("email",this.emailTarget.value);try{let t=document.querySelector("[data-locale]").getAttribute("data-locale");e.append("_locale",t),await i().post("/entry/change_owner_request",e),this.changeOwnerModal.hide(),this.cancelTarget.click()}catch(e){const t=e.response.data,a=document.getElementById("change_owner_error_box");a&&t.error&&(a.textContent=t.error,a.removeAttribute("hidden"))}}}},35156:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{customUrl(e){const t=e.currentTarget.dataset.hideDelete?{hideDelete:e.currentTarget.dataset.hideDelete}:null;this.dispatch("customUrlBtn",{detail:{deleteUrl:e.currentTarget.dataset.deleteUrl,link:e.currentTarget.dataset.link,updateUrl:e.currentTarget.dataset.updateUrl,...t}})}}},68721:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(36468);t.default=class extends r.Qr{static targets=["closeModal","input","inputEmptyErr","inputDublicateErr","inputWrongErr"];customUrlModal=new n.Modal("#customUrlModal");connect(){customUrlModal.addEventListener("hide.bs.modal",(()=>{document.querySelector("#customUrlDelete").classList.remove("d-none")}))}init(e){document.querySelector("#customUrlInput").value=e.detail.link,document.querySelector("#customUrlDelete").href=e.detail.deleteUrl,document.querySelector("#customUrlUpdate").dataset.href=e.detail.updateUrl,e.detail.hideDelete&&document.querySelector("#customUrlDelete").classList.add(e.detail.hideDelete)}async update(e){if(!this.inputTarget.value.length)return void this.showErrorMsg(this.inputEmptyErrTarget);if(!/^[0-9a-zA-Z\-\/]+$/.test(this.inputTarget.value))return void this.showErrorMsg(this.inputWrongErrTarget);const t=new FormData;t.append("url",this.inputTarget.value);try{const{data:a}=await i().post(e.currentTarget.dataset.href,t);if(a.error)return void this.showErrorMsg(this.inputDublicateErrTarget);this.closeModalTarget.click(),window.location.reload()}catch(e){}}showErrorMsg(e){e.classList.remove("d-none"),setTimeout((()=>e.classList.add("d-none")),5e3)}}},64590:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(88714),o=a(10826);t.default=class extends r.Qr{static targets=["qrTypes","closeQrModal","qrcode","deleteQr","blockQr","modalBlockQr","qrcodeCheckbox","handleLiteCheckbox"];qrId=0;selectedQrType=0;connect(){const e=document.querySelectorAll("#entryAlert");e.length&&e.forEach((e=>{setTimeout((()=>e.classList.add("d-none")),5e3)})),a.e(9330).then(a.t.bind(a,9330,23)).then((e=>{this.qrcodeTargets.forEach((t=>{new e.default({data:t.dataset.link}).append(t)}))})),this.uniqueScans()}openQrTypesModal(e){this.qrId=e.currentTarget.dataset.id,this.selectedQrType=e.currentTarget.dataset.type,this.qrTypesTargets.forEach((t=>{t.dataset.index==e.currentTarget.dataset.type&&(t.checked=!0)}))}selectQrType(e){this.selectedQrType=e.currentTarget.dataset.index}saveQrType(){let e=document.querySelector("[data-locale]").getAttribute("data-locale");window.location.href=`/entry/ajax/${this.qrId}/edit-type?type=${this.selectedQrType}&_locale=${e}`,this.closeQrModalTarget.click()}deleteQr(e){let t=document.getElementsByClassName("pagination"),a=1;t.length>0&&(a=t[0].childElementCount);let r=this.qrcodeCheckboxTargets.length,s=0;this.qrcodeCheckboxTargets.forEach((e=>{e.checked&&(formData.append("entries[]",e.dataset.id),s++)})),1===a&&r===s&&this.eraseCookie("filterByType"),this.deleteQrTarget.setAttribute("href",e.currentTarget.dataset.href)}blockQr(e){e.preventDefault();let t=1;1==this.blockQrTarget.dataset.block&&(t=0),window.location.href=`/entry/block/update/${this.blockQrTarget.dataset.id}/${t}`}modalBlockQr(e){e.preventDefault(),this.blockQrTarget.dataset.id=e.currentTarget.dataset.id;let t=0;if(e.currentTarget.dataset.block){document.querySelector("#blockQr .modal-title").innerHTML="Unblock QR-Code?",document.querySelector("#blockQr .modal-body p").innerHTML="Are you sure you want to unblock QR-Code?";let e=document.querySelector("#blockQr .modal-footer a");e.innerHTML="Unblock",e.classList.remove("btn-danger"),e.classList.add("btn-success"),t=1}this.blockQrTarget.dataset.block=t}eraseCookie(e){document.cookie=e+"=; Max-Age=-99999999;"}async downloadPng(e){try{const{data:t}=await i()(e.target.dataset.href);if(!t.url){const t=document.querySelector("#entryAlertError");t.classList.remove("d-none"),t.querySelector("div").innerText=e.target.dataset.noAccess,setTimeout((()=>t.classList.add("d-none")),5e3)}if(n.q){const e=await(0,o.qH)(t.url),{data:a}=await i().post("/qrvisualization/save-web-view/",{id:t.id.split("_")[0],image:e});return void await window.ReactNativeWebView.postMessage(a)}const a=new Image;a.crossOrigin="anonymous",a.src=t.url,a.onload=function(){const e=document.createElement("canvas"),r=e.getContext("2d");e.width=a.width,e.height=a.height,r.drawImage(a,0,0);const s=e.toDataURL(t.contentType),i=document.createElement("a");i.href=s,i.download=`${t.name}.png`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}catch(e){console.error("Error downloading image:",e)}}showEditField(e){const t=e.target.closest("h5");t.querySelector(".edit-qr-name").classList.remove("d-none"),t.querySelector(".qr-name").classList.add("d-none"),t.querySelector(".confirm-icon ").classList.remove("d-none"),t.querySelector(".edit-icon").classList.add("d-none")}async editQrName(e){const t=e.target.closest("h5"),a=document.querySelector("[data-locale]").getAttribute("data-locale"),r=new FormData;r.append("_locale",a),r.append("title",t.querySelector(".edit-qr-name").value.trim());try{await i().post(`/entry/${t.dataset.id}/edit-title`,r),window.location.reload()}catch(e){const t=document.querySelector("#entryAlertError");t.classList.remove("d-none"),t.querySelector("div").innerText=e.response.data.error,setTimeout((()=>t.classList.add("d-none")),5e3)}}async handleLiteCheckbox(e){const t=parseInt(e.target.getAttribute("data-entry-id"));if(!t||isNaN(t))return void console.error("Entry id must be a number");const a=e.target.checked;try{const e=await i().post("/subscription/toggle-lite",{entryId:t,isEnable:a}),r=(e.data.data??null).disableEntry??null;if(r){document.querySelectorAll(`[data-entry-id="${r}"]`).forEach((e=>{e.checked=!1}))}}catch(t){const a=t.response;let r=t.message;a&&a.data&&a.data.message&&(r=a.data.message),e.target.checked=!1,console.error("Error in request to enable/disable lite subscription| "+r)}}async uniqueScans(){const e=new FormData;let t=document.querySelectorAll("[data-entry-user-id]");t.forEach((function(t){e.append("entries[]",t.getAttribute("data-id"))}));try{const{data:a}=await i().post("/entry/unique-scans",e);t.forEach((function(e){let t=e.getAttribute("data-id");e.querySelectorAll(".spinner-border").forEach((e=>e.classList.add("d-none"))),e.querySelectorAll(".uniq-users").forEach((e=>e.innerHTML=a[t]))}))}catch(e){console.log(e)}}}},83120:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["noCards"];cards=document.querySelectorAll(".accordion-item");timer=null;search(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{const e=document.querySelector('[name="_csrf_token"]').value;i()({method:"get",url:"/entry/faq",headers:{"X-CSRF-TOKEN":e}}),this.timer=null}),1e3);for(let t=0;t<this.cards.length;t++)this.cards[t].textContent.toLowerCase().includes(e.target.value.toLowerCase())?this.cards[t].classList.remove("is-hidden"):this.cards[t].classList.add("is-hidden");document.querySelectorAll(".accordion-item.is-hidden").length===this.cards.length?this.noCardsTarget.classList.remove("d-none"):this.noCardsTarget.classList.add("d-none")}}},72153:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["saveBtn","select","infoUploadDiv","infoUploadButton","fileName","fileSize","file","uploadDiv","sendBtn","downloadCsvBtn"];connect(){let e=document.querySelector("#user_domain_domainName");e&&e.addEventListener("input",this.changeDomain.bind(this))}async downloadCsv(e){const t=this.selectTarget.value;if(!t)return!1;const a=e.target.querySelectorAll("svg");a[0].classList.remove("d-none"),a[1].classList.add("d-none"),console.log(t);const{data:r}=await i()(t),s=new Blob([r],{type:"text/csv"}),n=URL.createObjectURL(s),o=document.createElement("a");o.href=n,o.download="example.csv",document.body.appendChild(o),o.click()}changeDomain(e){const t=e.target.value.replace(/\s/g,"");e.target.value=t,this.saveBtnTarget.setAttribute("disabled",""),this.saveBtnTarget.classList.add("text-white","btn-light-gray")}messageInput(e){let t=10485760;const a=this.fileTarget.files[0]??"undefined";if("undefined"!==a){let e=a.size/1024;this.fileNameTarget.innerHTML=a.name,this.fileSizeTarget.innerHTML=e.toFixed(2)+" KB",this.uploadDivTarget.classList.add("d-none"),this.infoUploadDivTarget.classList.remove("d-none"),a.size>t&&(this.maxFileSizeTarget.classList.add("text-danger"),this.maxFileSizeTarget.classList.remove("text-gray"))}"undefined"!==a&&a.size<t&&(this.sendBtnTarget.disabled=!1,this.sendBtnTarget.classList.add("btn-primary"),this.sendBtnTarget.classList.remove("text-white","bg-light-gray"))}async deleteFile(e){e.preventDefault(),this.fileNameTarget.innerHTML="",this.fileSizeTarget.innerHTML="",this.uploadDivTarget.classList.remove("d-none"),this.infoUploadDivTarget.classList.add("d-none"),this.fileTarget.value="",this.sendBtnTarget.disabled=!0,this.sendBtnTarget.classList.remove("btn-primary"),this.sendBtnTarget.classList.add("text-white","bg-light-gray")}selectExampleCSV(e){const t=this.downloadCsvBtnTarget.querySelectorAll("svg");t[1].classList.remove("d-none"),t[0].classList.add("d-none")}async generateCodes(e){e.preventDefault();let t=e.target.action;e.target.querySelectorAll("#entry_csv_add_form_template").forEach((function(e){e.value&&(t+="?template="+e.value)}));const a=new FormData(e.target),r=document.querySelector(".loaderWrapper");r.classList.remove("d-none");try{await i().post(t,a),window.location.reload()}catch(e){r.classList.add("d-none")}}}},87965:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(78797);t.default=class extends r.Qr{static targets=["firstName","tab1","dateOfBirth","lastName","username","phone","companyName","address","alert","tab2","language","timezone","password","plainPassword","tab3","advCategory","alertError","companyEmail","website","additionalPhone","taxNumber","companyEmailErr","companyWebsiteErr","dateErr","phoneErr","addPhoneErr","passwordErr","addBtn","removeBtn","sharedEmail","accessType","userTable","pagination","alertWarning"];iti;itiAdditional;errorValidation=!1;moment=null;intlTelInput=null;datepicker=null;async connect(){this.moment=(await Promise.all([a.e(1762),a.e(6700)]).then(a.t.bind(a,30381,23))).default,this.intlTelInput=(await a.e(8699).then(a.t.bind(a,18699,23))).default,this.datepicker=(await a.e(1448).then(a.t.bind(a,1448,23))).default;const e=this.datepicker("#datepicker",{formatter:(e,t)=>{const a=this.moment(t).format("MM.DD.YYYY");e.value=a}});if(this.dateOfBirthTarget.value){const t=this.moment(this.dateOfBirthTarget.value,"MM.DD.YYYY").toDate();e.setDate(t)}const t={separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",initialCountry:"us"};this.iti=this.intlTelInput(this.phoneTarget,t),this.itiAdditional=this.intlTelInput(this.additionalPhoneTarget,t)}async deleteUser(e){e.preventDefault();try{await i().post(e.target.dataset.href),window.location.href="/"}catch(e){}}async updateGeneral(e){e.preventDefault();const t=/^[0-9]+$/;this.errorValidation=!1,this.validateInputWithErr(this.companyEmailTarget.value,/^[^\s@]+@[^\s@]+\.[^\s@]+$/,this.companyEmailErrTarget),this.validateInputWithErr(this.websiteTarget.value,n.W4,this.companyWebsiteErrTarget),this.validateInputWithErr(this.dateOfBirthTarget.value,/^(0[1-9]|1[0-2])\.(0[1-9]|[1-2][0-9]|3[0-1])\.(19|20)\d{2}$/,this.dateErrTarget);let a=this.phoneTarget.value;if(a&&(a=a.replace(/ +/g,"")),this.validateInputWithErr(a,t,this.phoneErrTarget),this.validateInputWithErr(this.additionalPhoneTarget.value,t,this.addPhoneErrTarget),this.iti.getNumber().length&&this.iti.getNumber().length>30&&(this.showErrorMsg(this.phoneErrTarget),this.errorValidation=!0),this.itiAdditional.getNumber().length&&this.itiAdditional.getNumber().length>30&&(this.showErrorMsg(this.addPhoneErrTarget),this.errorValidation=!0),this.errorValidation)return;const r=new FormData;r.append("firstName",this.firstNameTarget.value),r.append("lastName",this.lastNameTarget.value),r.append("tab",this.tab1Target.value),r.append("dateOfBirth",this.dateOfBirthTarget.value&&this.moment(this.dateOfBirthTarget.value).toString()),r.append("username",this.usernameTarget.value),r.append("companyName",this.companyNameTarget.value),r.append("address",this.addressTarget.value),r.append("advCategory",this.advCategoryTarget.value),r.append("companyEmail",this.companyEmailTarget.value),r.append("website",this.websiteTarget.value),r.append("taxNumber",this.taxNumberTarget.value),this.iti.getNumber().length&&r.append("phones[]",this.iti.getNumber()),this.itiAdditional.getNumber().length&&r.append("phones[]",this.itiAdditional.getNumber());try{let e=document.querySelector("[data-locale]").getAttribute("data-locale");void 0===e&&(e="en"),r.append("_locale",e);let t=await i().post("/account/update",r);if(Array.isArray(t.data))for(const e of t.data)if(e.error){this.showAlert(e.error);break}this.showSuccessAlert()}catch(e){}}async updateSettings(e){e.preventDefault();const t=new FormData;t.append("country",this.languageTarget.value),t.append("timezone",this.timezoneTarget.value),t.append("tab",this.tab2Target.value);try{await i().post("/account/update",t),this.showSuccessAlert()}catch(e){}}async addAccountAccess(e){e.preventDefault();const t=this.sharedEmailTarget.value.trim();if(!this.validationEmail(t))return;const a=new FormData;a.append("newAccessAccount","true"),a.append("sharedEmail",t),a.append("accessType",this.accessTypeTarget.value),a.append("tab",this.tab2Target.value);try{const e=await i().post("/account/update",a);e.data.success?await i().get("/account/add-user-row",{params:{sharedEmail:t,accessType:this.accessTypeTarget.value}}).then((e=>{const{rowHtml:t,paginationHtml:a}=e.data,r=this.paginationTarget.querySelector("a.page-link");if(r)this.backToFirstPageLink(r);else{this.userTableTarget.insertAdjacentHTML("afterbegin",t),this.paginationTarget.innerHTML=a,this.showSuccessAlert();this.paginationTarget.querySelectorAll("a.page-link").forEach((e=>{const t=`/account?page=${e.innerText}`;e.setAttribute("href",t)}));const e=this.paginationTarget.querySelector("a.page-link");e&&this.backToFirstPageLink(e)}document.getElementById("sharedEmail").value=""})):this.showAlert(e.data[0].error)}catch(e){console.error(e)}}validationEmail(e){return""===e?(this.showAlert("Please enter an email address.","warning"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?!(e.length>255)||(this.showAlert("Email address is too long.","warning"),!1):(this.showAlert("Please enter a valid email address.","warning"),!1)}backToFirstPageLink(e){return e.href="/account?page=1",e.click(),!0}async updatePassword(e){if(e.preventDefault(),!this.plainPasswordTarget.value.trim().length)return void this.showErrorMsg(this.passwordErrTarget);const t=new FormData;t.append("password",this.passwordTarget.value),t.append("plainPassword",this.plainPasswordTarget.value),t.append("tab",this.tab3Target.value);try{const{data:e}=await i().post("/account/update",t);if(Array.isArray(e)&&e[0]?.error)return void this.showAlert(e[0].error);this.showSuccessAlert()}catch(e){}finally{this.passwordTarget.value="",this.plainPasswordTarget.value=""}}showSuccessAlert(){this.alertTarget.classList.remove("d-none"),setTimeout((()=>this.alertTarget.classList.add("d-none")),5e3)}showAlert(e,t="error"){const a="warning"===t?this.alertWarningTarget:this.alertErrorTarget,r=a.querySelector(`.${t}`);a.classList.remove("d-none"),r.innerHTML=e,setTimeout((()=>{a.classList.add("d-none"),r.innerHTML=""}),5e3)}showAdditionalPhone(e){e.target.classList.add("d-none"),this.additionalPhoneTarget.parentNode.parentNode.classList.remove("d-none"),this.removeBtnTarget.classList.remove("d-none")}showErrorMsg(e){e.classList.remove("d-none"),setTimeout((()=>e.classList.add("d-none")),5e3)}validateInputWithErr(e,t,a){e.length&&!t.test(e)&&(this.showErrorMsg(a),this.errorValidation=!0)}removeAdditionalPhone(e){e.target.classList.add("d-none"),this.additionalPhoneTarget.parentNode.parentNode.classList.add("d-none"),this.additionalPhoneTarget.value="",this.addBtnTarget.classList.remove("d-none")}closeAlert(e){e.currentTarget.parentNode.classList.add("d-none")}}},89093:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var r=a(6599),s=a(9669),i=a.n(s),n=class extends r.Qr{static targets=["table","pagination"];connect(){this.addEventListeners()}addEventListeners(){this.paginationTarget.addEventListener("click",this.handlePaginationClick.bind(this))}handlePaginationClick(e){if(e.preventDefault(),"A"===e.target.tagName){const t=e.target.getAttribute("href");i().get(t).then((e=>{const t=document.createElement("div");t.innerHTML=e.data;const a=t.querySelector("#userTable");this.tableTarget.innerHTML=a.innerHTML;this.paginationTarget.querySelectorAll("a").forEach((e=>{e.classList.remove("active")}));const r=t.querySelector(".navigation");this.paginationTarget.innerHTML=r.innerHTML;const s=t.querySelector(".navigation .current");if(s){const e=s.innerText.trim(),t=this.paginationTarget.querySelector(`a[data-page="${e}"]`);t&&t.classList.add("active")}})).catch((e=>{console.error("Error:",e)}))}}},o=class extends r.Qr{static targets=["modal","removeModal","options","accessType","alert","tab2","owner","sharedUser","hideAccessType","confirmButton","removeButton","userRow","table","pagination"];static controllers=[n];openModal(e){const t=e.currentTarget;this.currentRow=t.closest("tr");const a=this.currentRow.querySelector(".sharedUser").textContent;this.modalTarget.querySelector("span[data-shared-user]").textContent=a,this.modalTarget.style.display="block"}openRemoveModal(e){e.preventDefault();const t=e.currentTarget;this.currentRow=t.closest("tr");const a=this.currentRow.querySelector(".sharedUser").textContent;this.removeModalTarget.querySelector("span[data-shared-user]").textContent=a,this.removeButtonTarget.dataset.recordId=e.target.dataset.recordId,this.removeModalTarget.style.display="block"}close(){this.modalTarget.style.display="none"}closeRemoveModal(){this.removeModalTarget.style.display="none"}async save(e){e.preventDefault();const t=this.modalTarget.querySelector("span[data-shared-user]").textContent,a=new FormData;a.append("sharedEmail",t),a.append("accessType",this.accessTypeTarget.value),a.append("tab",this.tab2Target.value);try{const e=await i().post("/account/update",a);this.updateAccessTypeInTable(e.data.accessType)}catch(e){console.error(e)}this.modalTarget.style.display="none"}updateAccessTypeInTable(e){const t=this.currentRow.querySelector(".hideAccessType");let a,r;t.innerHTML="",1==e?(a=document.createElement("div"),a.className="editorAccessTypeBox",r=document.createElement("span"),r.className="editorAccessTypeText",r.textContent="Editor"):(a=document.createElement("div"),a.className="adminAccessTypeBox",r=document.createElement("span"),r.className="adminAccessTypeText",r.textContent="Admin"),a.appendChild(r),t.appendChild(a)}async removeRecord(e){e.preventDefault();const t=this.removeButtonTarget.dataset.recordId;try{i().post("/account/access/remove/"+t,{recordId:t}).then((e=>{if(e.data.success){const e=Array.from(this.userRowTargets).find((e=>e.dataset.recordId===t));if(e){e.remove();const t=this.paginationTarget.querySelector(".active a");if(t){let e=t.href="/account?page=1";t.href!==e&&t.click()}}}}))}catch(e){console.error(e)}this.removeModalTarget.style.display="none"}}},92113:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(20296),o=a.n(n),l=a(36468);t.default=class extends r.Qr{static targets=["periodOption","entry_search_query","filter","archived","entries","csrf_token","qrcodeCheckbox","filterActionBtn","selectFolder","selectFolderErr","formatFolder","downloadFolderBtn"];copyModal=new l.Modal("#createCopyBulkModal");deleteQrModal=new l.Modal("#deleteQrBulk");moveToFolderModal=new l.Modal("#moveToFolderBulkModal");moveFromPremiumToRegularFolderModal=new l.Modal("#moveFromPremiumToRegularFolderBulkModal");storageIsFullModal=new l.Modal("#storage-size-exceeded");preloader=new l.Modal(".loaderWrapper");downloadFolderModal=new l.Modal("#downloadFolderModal");connect(){this.fetchSearchQrs=this.fetchSearch.bind(this),this.debouncedCountWords=o()((()=>{(this.entry_search_queryTarget.value.length>=3||0===this.entry_search_queryTarget.value.length)&&this.fetchSearchQrs()}),500),this.entry_search_queryTarget.addEventListener("keyup",this.debouncedCountWords);const e=new URLSearchParams(window.location.search).get("dateFilter");e&&this.periodOptionTarget.querySelector(`option[value="${e}"]`)?.setAttribute("selected",!0)}disconnect(){this.entry_search_queryTarget.removeEventListener("keyup",this.debouncedCountWords)}selectType(e){let t=this.getCookie("user_local");void 0===t&&(t="en");const a=new URL(window.location.href).searchParams.get("archived");void 0===t&&(t="en"),window.location.href=`${"en"!==t?`/${t}`:""}/entry/${e.target.value}${a?"?archived=1":""}`}selectPeriod(e){let t=new URL(window.location.href);t.searchParams.set("dateFilter",e.target.value),window.location.href=t.toString()}eraseCookie(e){document.cookie=e+"=; Max-Age=-99999999;"}selectLimit(e){let t=new URL(window.location.href);t.searchParams.set("limit",e.currentTarget.dataset.value),window.location.href=t.toString()}async search(e){e.preventDefault(),this.fetchSearchQrs()}async fetchSearch(){i().defaults.headers.common["X-CSRF-TOKEN"]=this.csrf_tokenTarget.value;const{data:e}=await i()(`?entry_search_query=${this.entry_search_queryTarget.value}&filter=${this.filterTarget.value}&archived=${this.archivedTarget.value}`,{responseType:"text"}),t=(new DOMParser).parseFromString(e,"text/html").querySelector("#entries");this.entriesTarget.innerHTML=t.innerHTML}emailVerify(e){i()(e.currentTarget.dataset.href)}getCookie(e){let t={};return document.cookie.split(";").forEach((function(e){let[a,r]=e.split("=");t[a.trim()]=r})),t[e]}createNewBtn(){dataLayer.push({event:"button_Create_New_QR_Code"})}selectAllQrs(e){return e.target.closest("li").classList.contains("disable")||e.target.classList.contains("disable")?(e.target.checked=!1,!1):(this.filterActionBtnTargets.forEach((t=>{e.target.checked?t.classList.remove("disable"):t.classList.add("disable")})),void this.qrcodeCheckboxTargets.forEach((t=>{const a=t.closest(".selectable");e.target.checked?(t.checked=!0,t.setAttribute("checked",""),a.classList.add("bg-primary-light","border-primary")):(t.checked=!1,t.removeAttribute("checked"),a.classList.remove("bg-primary-light","border-primary"))})))}checkQr(e){const t=e.currentTarget.closest(".selectable");t.classList.toggle("bg-primary-light"),t.classList.toggle("border-primary");let a=document.querySelector("[data-user-id]").getAttribute("data-user-id"),r=document.querySelectorAll("[data-entry-user-id] "),s=document.querySelector('[data-action="click->admin--qr-filters#showFolerQrModal"]'),i=document.querySelector('[data-action="click->admin--qr-filters#changeOwner"]'),n=!1;this.qrcodeCheckboxTargets.some((e=>e.checked))?(this.filterActionBtnTargets.forEach((e=>e.classList.remove("disable"))),r.forEach((e=>{e.querySelector(".form-check-input").checked&&a!==e.getAttribute("data-entry-user-id")&&(n=!0)})),[i,s].forEach(n?e=>{!1===e.classList.contains("disable")&&e.classList.add("disable")}:e=>{!0===e.classList.contains("disable")&&e.classList.remove("disable")})):this.filterActionBtnTargets.forEach((e=>e.classList.add("disable")))}showCopyModal(e){e.preventDefault(),e.target.closest(".head-menu").classList.contains("disable")||this.copyModal.show()}showDeleteQrModal(e){e.preventDefault(),e.target.closest(".head-menu").classList.contains("disable")||this.deleteQrModal.show()}showFolerQrModal(e){e.preventDefault();let t=e.target.closest(".head-menu"),a=[];this.qrcodeCheckboxTargets.forEach((e=>{e.checked&&a.push(e.dataset.id)})),document.querySelector("#qrId").dataset.qr=JSON.stringify(a),t.classList.contains("disable")||this.moveToFolderModal.show()}async copyQrBulk(){this.copyModal.hide(),this.preloader._element.classList.remove("d-none");const e=new FormData;this.qrcodeCheckboxTargets.forEach((t=>{t.checked&&e.append("entries[]",t.dataset.id)}));let t=document.querySelector("[data-locale]").getAttribute("data-locale");e.append("locale",t);try{let{data:t}=await i().post("/entry/bulk/copy",e);if(this.preloader._element.classList.add("d-none"),"error"===t.status){if("Not enough space"===t.error)return this.storageIsFullModal.show(),!1;if("Authorization"===t.error)return window.location.href="/login",!1;{const e=document.querySelector("#entryAlertError");return e.classList.remove("d-none"),e.querySelector("div").innerText=t?.error,setTimeout((()=>{e.classList.add("d-none")}),5e3),!1}}window.location.reload()}catch(e){}}async deleteQrBulk(e){e.preventDefault(),this.deleteQrModal.hide(),this.preloader._element.classList.remove("d-none");let t=document.getElementsByClassName("pagination"),a=1;t.length>0&&(a=t[0].childElementCount);let r=this.qrcodeCheckboxTargets.length,s=0;const n=new FormData;this.qrcodeCheckboxTargets.forEach((e=>{e.checked&&(n.append("entries[]",e.dataset.id),s++)}));try{1===a&&r===s&&this.eraseCookie("filterByType");const{data:e}=await i().post("/entry/bulk/delete",n);if(this.preloader._element.classList.add("d-none"),"error"===e?.status){const t=document.querySelector("#entryAlertError");return t.classList.remove("d-none"),t.querySelector("div").innerText=e?.error,void setTimeout((()=>t.classList.add("d-none")),5e3)}window.location.reload()}catch(e){}}async moveToFolderBulk(e){if(!1===e.target.classList.contains("premiumToRegularFolderConfirmBulk")){let e=this.selectFolderTarget.options[this.selectFolderTarget.selectedIndex].getAttribute("data-premium-folder"),t="0",a="";if(this.qrcodeCheckboxTargets.forEach((e=>{if(e.checked){let r=e.closest(".col-12").querySelector("[data-premium-folder]");if(r){let e=r.getAttribute("data-premium-folder");"1"===e&&(t=e,a=r.innerHTML)}}})),"1"===t&&""===e){let e=this.getCookie("user_local");void 0===e&&(e="en"),this.moveToFolderModal.hide(),this.moveFromPremiumToRegularFolderModal.show();let t=document.querySelector(".title_from_premium_to_regular_folder_bulk"),r=t.innerHTML.split("/"),s=r[0]+a+r[1];return["ar","he"].includes(e)&&(s=r[1]+a+r[0]),t.innerHTML=s,!1}this.moveFromPremiumToRegularFolderModal.hide()}if(this.moveToFolderModal.hide(),this.preloader._element.classList.remove("d-none"),"select"===this.selectFolderTarget.value)return this.selectFolderErrTarget.classList.remove("d-none"),void setTimeout((()=>this.selectFolderErrTarget.classList.add("d-none")),5e3);const t=new FormData;this.qrcodeCheckboxTargets.forEach((e=>{if(e.checked){let a=e.closest(".col-12").querySelector("[data-premium-folder]");if(a){a.getAttribute("data-premium-folder")}t.append("entries[]",e.dataset.id)}})),t.append("folderId",this.selectFolderTarget.value);try{await i().post("/entry/bulk/folder",t),this.preloader._element.classList.add("d-none"),window.location.reload()}catch(e){}}buyPremium(){window.location.href="/subscription/admin"}cancel(){window.location.reload()}changeOwner(e){if(e.preventDefault(),e.target.closest("li").querySelector("a").classList.contains("disable"))return!1;const t=[];this.qrcodeCheckboxTargets.forEach((e=>{e.checked&&t.push(e.dataset.id)}));let a=this.getCookie("user_local");void 0===a&&(a="en"),window.location.href=`${"en"!==a?`/${a}`:""}/entry/entries_list?entries=${t.join(",")}`}async acceptChangeOwner(e){const t=new FormData;t.append("email",e.currentTarget.dataset.email);try{await i().post("/entry/change_owner_request/accept",t),window.location.reload()}catch(e){}}async declineChangeOwner(e){const t=new FormData;t.append("email",e.currentTarget.dataset.email);try{await i().post("/entry/change_owner_request/declin",t),window.location.reload()}catch(e){}}deleteFolderModalInit(e){document.querySelectorAll(".deleteFolderName").forEach((t=>t.innerHTML=e.target.dataset.folderName)),document.querySelector("#deleteFolderBtn").dataset.folderId=e.target.dataset.folderId}getFolderName(e){const t=document.querySelector("#oldFolderName");t.innerHTML=e.currentTarget.dataset.folder,t.dataset.folderId=e.currentTarget.dataset.folderId}downloadFolderInit(e){this.downloadFolderBtnTarget.dataset.folderId=e.target.dataset.folderId,this.downloadFolderBtnTarget.dataset.folder=e.target.dataset.folder}async downloadFolder(e){let t="png";this.formatFolderTargets.forEach((e=>e.checked&&(t=e.id)));const a=`${e.currentTarget.dataset.folder}.zip`,r=new FormData;r.append("folderId",e.currentTarget.dataset.folderId),r.append("extension",t);try{const{data:e}=await i().post("/entry/folder/download/qr",r,{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([e])),s=document.createElement("a");s.href=t,s.setAttribute("download",a),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s),this.downloadFolderModal.hide()}catch(e){}}}},62316:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["alert","tab2","domainName","email","tab4","tab3","script","alertError","sharedTableBody","tableWrapper","emailMove","domainIncorrectErr","userEmailErr","scriptErr","saveBtn","contentLanguage"];static values={id:Number};async domainSave(e){e.preventDefault();const t=this.domainNameTarget.value;if(!/^(?=^.{4,253}$)(^((?!-)[a-z0-9-]{0,62}[a-z0-9]\.)+[a-z]{2,63}$)/.test(t)||!t.length)return void this.showErrorMsg(this.domainIncorrectErrTarget);let a=document.querySelector("[data-locale]").getAttribute("data-locale");void 0===a&&(a="en");const r=new FormData;this.domainNameTarget.value&&r.append("domainName",this.domainNameTarget.value),r.append("tab",this.tab3Target.value),r.append("_locale",a);try{await i().post(`/entry/settings/${e.currentTarget.dataset.id}/update`,r),this.showSuccessAlert()}catch(e){}}async domainRemove(e){e.preventDefault();try{await i()(`/foreign-domain/${e.target.dataset.id}/entry-domain-delete?entryId=${e.target.dataset.id}&locale=${e.target.dataset.locale}`),this.domainNameTarget.value="",this.showSuccessAlert()}catch(e){}}async move(e){if(e.preventDefault(),!this.emailMoveTarget.value.trim())return;const t=e.target.closest("form"),a=await fetch(t.action,{method:"POST",body:new FormData(t)});if(a.url.endsWith("entry"))return void(window.location.href=a.url);const r=await a.json();r.error&&this.showErrorAlert(r.error)}async share(e){if(e.preventDefault(),!this.emailTarget.value.trim())return;const t=new FormData;t.append("email",this.emailTarget.value);try{let e=document.querySelector("[data-locale]"),a="en";e&&(a=e.dataset.locale);const{data:r}=await i().post(`/${a}/entry-share/${this.idValue}`,t);if(r?.error)return void this.showErrorAlert(r.error);null!==this.tableWrapperTarget.querySelector("table")?this.sharedTableBodyTarget.innerHTML+=`\n      <tr>\n      <td class="align-middle">${this.emailTarget.value}</td>\n      <td class="align-middle">\n      <span>waiting</span>\n      </td>\n      </tr>\n      `:this.tableWrapperTarget.innerHTML=`\n        <p class="text-dark">Shared for:</p>\n        <table class="table">\n        <thead>\n        <tr>\n            <th scope="col">Email</th>\n            <th scope="col"></th>\n        </tr>\n        </thead>\n        <tbody class="table-group-divider" data-admin--qrsettings-target="sharedTableBody">\n          <tr>\n          <td class="align-middle">${this.emailTarget.value}</td>\n          <td class="align-middle">\n          <span>waiting</span>\n          </td>\n          </tr>\n        </tbody>\n        </table>\n        `,this.emailTarget.value="",this.showSuccessAlert()}catch(e){}}async saveScript(e){e.preventDefault();let t=this.scriptTarget.value.length;if(t>0&&(t>1e4||t<10))return void this.showErrorMsg(this.scriptErrTarget);let a=document.querySelector("[data-locale]").getAttribute("data-locale");void 0===a&&(a="en");const r=new FormData;r.append("script",this.scriptTarget.value),r.append("tab",this.tab4Target.value),r.append("_locale",a);try{await i().post(`/entry/settings/${this.idValue}/update`,r),this.showSuccessAlert()}catch(e){}}async removeShare(e){e.preventDefault();const t=e.currentTarget.dataset.id,a=new FormData;a.append("unShare",e.currentTarget.value);try{let e=document.querySelector("[data-locale]"),r="en";e&&(r=e.dataset.locale);const{data:s}=await i().post(`/${r}/entry-share/${t}/modify`,a);if(s?.error)return void this.showErrorAlert(s.error);const n=this.sharedTableBodyTarget.querySelector(`[data-id='${t}']`);n&&n.parentNode.removeChild(n),this.showSuccessAlert()}catch(e){}}showErrorAlert(e){this.alertErrorTarget.classList.remove("d-none");const t=this.alertErrorTarget.querySelector(".error");t.innerHTML=e,setTimeout((()=>{this.alertErrorTarget.classList.add("d-none"),t.innerHTML=""}),5e3)}showSuccessAlert(){this.alertTarget.classList.remove("d-none"),setTimeout((()=>this.alertTarget.classList.add("d-none")),5e3)}changeDomain(e){const t=e.target.value.replace(/\s/g,"");this.domainNameTarget.value=t,this.saveBtnTarget.setAttribute("disabled","")}showErrorMsg(e){e.classList.remove("d-none"),setTimeout((()=>e.classList.add("d-none")),5e3)}closeAlert(e){e.currentTarget.parentNode.classList.add("d-none")}async contentLanguageSave(e){e.preventDefault();let t=document.querySelector("[data-locale]").getAttribute("data-locale");void 0===t&&(t="en");const a=new FormData;a.append("local",this.contentLanguageTarget.value),a.append("tab","local"),a.append("_locale",t);try{const{data:t}=await i().post(`/entry/settings/${e.target.dataset.id}/update`,a);if(t?.error)return void this.showErrorAlert(t.error);this.showSuccessAlert()}catch(e){}}}},69890:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(78797);t.default=class extends r.Qr{static targets=["refLink","id","amount","method","login","date","status","withdrawRow","payoneerMethod","swiftMethod","country","city","phone","amountValue","withdrawBtn","email","payoneerRecipientAddress","payoneerRecipientIndex","payoneerAccountType","payoneerBankName","payoneerIban","payoneerName","payoneerCard","swiftRecipientName","swiftRecipientAddress","swiftBankName","swiftBankAddress","swiftIban","swiftBicCode","type","isSaved","withdrawErr","closeModal"];method=null;status=null;withdrawMethod=1;iti;intlTelInput=null;async connect(){this.intlTelInput=(await a.e(8699).then(a.t.bind(a,18699,23))).default;this.iti=this.intlTelInput(this.phoneTarget,{separateDialCode:!0,utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",initialCountry:"ua"}),i()(`/restrictions/location/get-countries?locale=${this.countryTarget.dataset.locale}`).then((({data:e})=>{const t=e.map((e=>`<option value=${e.id}>${e.title}</option>`));this.countryTarget.innerHTML+=t})),this.amountValueTarget.addEventListener("blur",(e=>{e.target.value<100&&(e.target.value=100),Number(e.target.value)>Number(e.target.dataset.max)&&(e.target.value=e.target.dataset.max)}))}async getCities(){const e=this.cityTarget.options[0].outerHTML,{data:t}=await i()(`/restrictions/location/get-cities?country=${this.countryTarget.value}&locale=${this.countryTarget.dataset.locale}`),a=t.map((e=>`<option value=${e.id}\n      }>${e.title}</option>`));this.cityTarget.innerHTML=e+a,this.updateWithdrawBtn()}copyLink(){window.navigator.clipboard.writeText(this.refLinkTarget.innerText)}withdrawTab(){document.querySelector("#pills-profile-tab").click()}viewDetails(e){const t=e.currentTarget.dataset;this.idTarget.innerText=t.id,this.amountTarget.innerText=t.amount,this.methodTarget.innerText=t.method,this.loginTarget.innerText=t.login,this.dateTarget.innerText=t.date,this.statusTarget.innerText=t.status,this.statusTarget.parentNode.style.backgroundColor=2==t.statusNum?"#E5FAED":"#F5F5F5",this.statusTarget.style.color=2==t.statusNum?"#67AC5B":"#8B929A"}filterMethod(e){this.method=e.target.value,this.filterWithdraws()}filterStatus(e){this.status=e.target.value,this.filterWithdraws()}filterWithdraws(){this.withdrawRowTargets.forEach((e=>{e.classList.remove("d-none")})),this.withdrawRowTargets.forEach((e=>{this.method&&e.dataset.method!=this.method&&e.classList.add("d-none"),this.status&&e.dataset.status!=this.status&&e.classList.add("d-none")}))}selectWithdrawMethod(e){this.withdrawMethod=Number(e.target.value),1==e.target.value?(this.payoneerMethodTarget.classList.remove("d-none"),this.swiftMethodTarget.classList.add("d-none")):2==e.target.value&&(this.payoneerMethodTarget.classList.add("d-none"),this.swiftMethodTarget.classList.remove("d-none")),this.updateWithdrawBtn()}amountHandle(e){const t=e.target.value.replace(/\D/g,"");e.target.value=t.toString()}updateWithdrawBtn(){1===this.withdrawMethod&&n.u$.test(this.emailTarget.value)&&/^[0-9]+$/.test(this.phoneTarget.value)&&this.countryTargets.every((e=>""!==e.value))&&this.cityTarget.value&&this.payoneerRecipientAddressTarget.value&&this.payoneerRecipientIndexTarget.value&&this.payoneerAccountTypeTarget.value&&this.payoneerBankNameTarget.value&&this.payoneerIbanTarget.value&&this.payoneerNameTarget.value&&this.payoneerCardTarget.value||2===this.withdrawMethod&&this.swiftRecipientNameTarget.value&&this.swiftRecipientAddressTarget.value&&this.swiftBankNameTarget.value&&this.swiftBankAddressTarget.value&&this.swiftIbanTarget.value&&this.swiftBicCodeTarget.value?this.withdrawBtnTarget.removeAttribute("disabled"):this.withdrawBtnTarget.setAttribute("disabled",!0)}async withdrawHandler(){const e=new FormData;e.append("amount",parseFloat(this.amountValueTarget.value)),e.append("type",this.typeTarget.value),e.append("saved",this.isSavedTarget.checked),1==Number(this.typeTarget.value)?(e.append("recipientEmail",this.emailTarget.value),e.append("recipientPhone",this.iti.getNumber()),e.append("cityId",this.cityTarget.value),e.append("recipientAddress",this.payoneerRecipientAddressTarget.value),e.append("recipientAddressIndex",this.payoneerRecipientIndexTarget.value),e.append("recipientType",Number(this.payoneerAccountTypeTarget.value)),e.append("bankName",this.payoneerBankNameTarget.value),e.append("iban",this.payoneerIbanTarget.value),e.append("recipientName",this.payoneerNameTarget.value),e.append("payoneerAccount",this.payoneerCardTarget.value)):(e.append("recipientName",this.swiftRecipientNameTarget.value),e.append("recipientAddress",this.swiftRecipientAddressTarget.value),e.append("bankName",this.swiftBankNameTarget.value),e.append("bankAddress",this.swiftBankAddressTarget.value),e.append("iban",this.swiftIbanTarget.value),e.append("swiftBicCode",this.swiftBicCodeTarget.value));try{const{data:t}=await i().post("/referrer/withdrawal/create",e);if(t.error)return void this.showErrorAlert(t.error);this.closeModalTarget.click(),window.location.reload()}catch(e){}}showErrorAlert(e){this.withdrawErrTarget.classList.remove("d-none"),this.withdrawErrTarget.innerText=e,setTimeout((()=>{this.withdrawErrTarget.classList.add("d-none"),this.withdrawErrTarget.innerText=""}),5e3)}}},95451:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(36468),o=a(20296),l=a.n(o);t.default=class extends r.Qr{static targets=["email","shareBtn","addBtn","alertError","emailError","role","deleteShareUserBtn"];users=[];newUsers=[];countCloneEmailInput=1;deleteShareUser=new n.Modal("#deleteShareUser");async connect(){this.emailInput=await l()(this.emailInput.bind(this),500)}async emailInput(e){let t=e.target;this.shareBtnTarget.setAttribute("disabled","");let a=e.target.value.trim(),r=t.closest(".input_preparation"),s=r.querySelector(".emailErrorDuplicate"),n=r.querySelector('[data-admin--share-folder-target="emailError"]');if(""===a){return!1===s.classList.contains("d-none")&&s.classList.add("d-none"),!1===n.classList.contains("d-none")&&n.classList.add("d-none"),document.querySelectorAll('[data-action="input->admin--share-folder#emailInput"]').length>1&&this.shareBtnTarget.removeAttribute("disabled"),this.addBtnTarget.setAttribute("disabled",""),!1}const o=new FormData;o.append("email",e.target.value);let l=document.querySelector("[data-locale]").getAttribute("data-locale");o.append("locale",l);try{const{data:e}=await i().post("/entry/email_exists",o);if(e.error)this.showErrorMessage(n),this.shareBtnTarget.setAttribute("disabled",""),this.addBtnTarget.setAttribute("disabled",""),!1===s.classList.contains("d-none")&&s.classList.add("d-none");else{this.emailErrorTarget.classList.add("d-none");let e=document.querySelectorAll('[data-action="input->admin--share-folder#emailInput"]'),t=0;e.forEach((e=>{e.value.trim()===a&&(t+=1)})),document.querySelectorAll("[data-useremail]").forEach((e=>{e.getAttribute("data-useremail")===a&&(t=2)})),!1===s.classList.contains("d-none")&&(s.classList.add("d-none"),this.addBtnTarget.removeAttribute("disabled"),this.shareBtnTarget.removeAttribute("disabled")),t>1?(s.classList.remove("d-none"),!1===n.classList.contains("d-none")&&n.classList.add("d-none"),this.addBtnTarget.setAttribute("disabled",""),this.shareBtnTarget.setAttribute("disabled","")):(this.addBtnTarget.removeAttribute("disabled"),this.shareBtnTarget.removeAttribute("disabled"))}}catch(e){this.showErrorMessage(n),this.shareBtnTarget.setAttribute("disabled",""),this.addBtnTarget.setAttribute("disabled",""),!1===s.classList.contains("d-none")&&s.classList.add("d-none")}}showErrorMessage(e){e.classList.remove("d-none")}async shareFolder(e){const t=new URLSearchParams(window.location.search).get("folderId"),a=new FormData;a.append("folderId",t),a.append("_locale",document.querySelector("[data-locale]").getAttribute("data-locale")),document.querySelectorAll(".input_preparation").forEach((e=>{let t=e.querySelector("#floatingInput").value.trim(),r=e.querySelector("#role").value;""!==t&&a.append("emails[]",JSON.stringify({email:t,role:r,change:0}))})),document.querySelectorAll("[data-change-role]").forEach((e=>{let t=e.querySelector("[data-userEmail]").getAttribute("data-userEmail"),r=e.querySelector("#role").value;a.append("emails[]",JSON.stringify({email:t,role:r,change:1}))}));try{await i().post("/entry/share/folder",a),location.reload()}catch(e){e.response.data?.error&&this.showErrorAlert(e.response.data.error)}}async addSharedUser(){if(this.countCloneEmailInput>=5)return!1;let e=document.querySelector(".input_preparation").cloneNode(!0);e.querySelector(".buttonDiv").style.visibility="hidden",e.querySelector("input").value="";const t=document.querySelectorAll(".input_preparation");t[t.length-1].after(e),this.countCloneEmailInput+=1,this.addBtnTarget.setAttribute("disabled","")}changeRole(e){let t=e.target.closest("tr");t.getAttribute("data-change-role")?t.removeAttribute("data-change-role"):t.setAttribute("data-change-role","1"),0===document.querySelectorAll("[data-change-role]").length?this.shareBtnTarget.setAttribute("disabled",""):this.shareBtnTarget.removeAttribute("disabled")}openRemoveModal(e){e.preventDefault();let t=e.target.closest("a");if(this.deleteShareUser.show(),!0===t.classList.contains("opacity-50"))return!1;let a=document.querySelector(".question"),r=a.innerHTML.split(","),s=document.querySelector("[data-ahsred-folder-name]").getAttribute("data-ahsred-folder-name"),i=document.querySelector("[data-locale]").getAttribute("data-locale"),n=r[0];n+=" "+s,n+=r[1],"he"!==i&&"ar"!==i||(n=r[1],n+=" "+s,n+=r[0]),a.innerHTML=n,document.querySelector("#deleteShareUserBtn").setAttribute("href",t.getAttribute("href"))}showErrorAlert(e){this.alertErrorTarget.classList.remove("d-none");const t=this.alertErrorTarget.querySelector(".error");t.innerHTML=e,setTimeout((()=>{this.alertErrorTarget.classList.add("d-none"),t.innerHTML=""}),5e3)}closeAlert(e){e.currentTarget.parentNode.classList.add("d-none")}}},28318:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["message","sendBtn","message_type","antispam_time","antispam_time_min","antispam_time_max","antispam_honeypot","alert","file","fileName","fileSize","uploadDiv","infoUpload","infoUploadDiv","maxFileSize","limitText"];messageInput(e){let t=20971520;const a=this.fileTarget.files[0]??"undefined";if("undefined"!==a){let e=a.size/1024;this.fileNameTarget.innerHTML=a.name,this.fileSizeTarget.innerHTML=e.toFixed(2)+" KB",this.uploadDivTarget.classList.add("d-none"),this.infoUploadDivTarget.classList.remove("d-none"),a.size>t&&(this.maxFileSizeTarget.classList.add("text-danger"),this.maxFileSizeTarget.classList.remove("text-gray"))}"floatingTextarea2"===e.target.id&&(this.messageTarget.value.length<50||this.messageTarget.value.length>5e3?(this.limitTextTarget.classList.add("text-danger"),this.limitTextTarget.classList.remove("text-gray")):(this.limitTextTarget.classList.remove("text-danger"),this.limitTextTarget.classList.add("text-gray")),this.limitTextTarget.innerHTML=this.messageTarget.value.length+"/5000"),this.sendBtnTarget.disabled=this.messageTarget.value.length<50||this.messageTarget.value.length>5e3||"undefined"!==a&&a.size>t}async send(e){e.preventDefault();const t=this.fileTarget.files[0]??"undefined",a=new FormData;a.append("message_type",this.message_typeTarget.value),a.append("message_text",this.messageTarget.value),"undefined"!==t&&a.append("file",t,t.name),a.append("antispam_time",this.antispam_timeTarget.value),a.append("antispam_time_min",this.antispam_time_minTarget.value),a.append("antispam_time_max",this.antispam_time_maxTarget.value),a.append("antispam_honeypot",this.antispam_honeypotTarget.value);try{await i().post("/submit",a),this.messageTarget.value="",this.fileTarget.value="",this.sendBtnTarget.disabled=!0,this.alertTarget.classList.remove("d-none"),setTimeout((()=>this.alertTarget.classList.add("d-none")),5e3)}catch(e){}}async deleteFile(e){e.preventDefault(),this.fileNameTarget.innerHTML="",this.fileSizeTarget.innerHTML="",this.uploadDivTarget.classList.remove("d-none"),this.infoUploadDivTarget.classList.add("d-none"),this.maxFileSizeTarget.classList.remove("text-danger"),this.maxFileSizeTarget.classList.add("text-gray"),this.fileTarget.value=""}closeAlert(e){e.currentTarget.parentNode.classList.add("d-none")}openChat(){window.HelpCrunch&&HelpCrunch("openChat")}}},54109:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{uniqueUrl(e){this.dispatch("uniqueUrlBtn",{detail:{deleteUrl:e.currentTarget.dataset.deleteUrl,link:e.currentTarget.dataset.link,updateUrl:e.currentTarget.dataset.updateUrl}})}}},35751:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["closeModal","input","inputEmptyErr","inputDublicateErr","inputWrongErr"];init(e){let t=document.querySelector("[data-locale]").getAttribute("data-locale");void 0===t&&(t="en"),document.querySelector("#uniqueUrlInput").value=e.detail.link,document.querySelector("#uniqueUrlUpdate").dataset.href=e.detail.updateUrl}async update(e){if(!this.inputTarget.value.length)return void this.showErrorMsg(this.inputEmptyErrTarget);if(!/^[0-9a-zA-Z\-\/]+$/.test(this.inputTarget.value))return void this.showErrorMsg(this.inputWrongErrTarget);const t=new FormData;t.append("unique_key",this.inputTarget.value);try{const{data:a}=await i().post(e.currentTarget.dataset.href,t);if(a.error)return void this.showErrorMsg(this.inputDublicateErrTarget);this.closeModalTarget.click(),window.location.reload()}catch(e){}}showErrorMsg(e){e.classList.remove("d-none"),setTimeout((()=>e.classList.add("d-none")),5e3)}}},85528:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["fileName","fileSize","selectBlock","showBlock","artForm","captchaError","selectBlockInput","selectBlockButton","isHaveLogo"];connect(){this.changeState(),this.formLogoError()}handleFileSelect(e){const t=e.target.files[0];t?(this.fileNameTarget.innerHTML="Name: "+t.name,this.fileSizeTarget.innerHTML="Size: "+this.formatFileSize(t.size),this.selectBlockTarget.style.display="none",this.showBlockTarget.style.display="block"):(this.fileNameTarget.innerHTML="",this.fileSizeTarget.innerHTML="",this.selectBlockTarget.style.display="block",this.showBlockTarget.style.display="none")}formatFileSize(e){const t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}deleteFile(){this.fileNameTarget.innerHTML="",this.fileSizeTarget.innerHTML="",this.selectBlockTarget.style.display="block",this.showBlockTarget.style.display="none"}validateCaptcha(e){e.preventDefault(),grecaptcha.ready((()=>{0===grecaptcha.getResponse().length?(this.captchaErrorTarget.style.display="block",this.hideAfterDelay(this.captchaErrorTarget)):(this.captchaErrorTarget.style.display="none",this.artFormTarget.submit())}))}setDefaultState(){this.selectBlockInputTarget.disabled=!0,this.selectBlockButtonTarget.classList.add("opacity-25"),this.selectBlockButtonTarget.style.cursor="default"}changeState(){document.addEventListener("DOMContentLoaded",(()=>{const e=this.isHaveLogoTarget;e&&e.addEventListener("change",(e=>{"Yes"!==e.target.value?this.setDefaultState():(this.selectBlockInputTarget.disabled=!1,this.selectBlockButtonTarget.classList.remove("opacity-25"),this.selectBlockButtonTarget.style.cursor="pointer")}))}))}formLogoError(){let e=document.querySelector(".logo-error"),t=document.getElementById("art_qr_code_isHaveLogo");e.querySelector("ul")?t.style.border="1px solid #f44336":t.style.border="none"}}},66547:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["beforeVote","afterVote","showRating","ratingGroup","submitButton","averageRating","noRatingDescription","showRatingPercent"];connect(){this.selectedRating=0,this.checkVoteStatus()}checkVoteStatus(){"true"===this.getCookie("hasVoted")?this.showAfterVoteElements():this.showBeforeVoteElements()}showAfterVoteElements(){this.ratingGroupTarget.classList.add("d-none"),this.averageRatingTarget.classList.remove("d-none"),this.noRatingDescriptionTarget.classList.add("d-none"),this.showRatingTarget.classList.remove("d-none"),this.afterVoteTarget.classList.remove("d-none"),this.beforeVoteTarget.classList.add("d-none")}showBeforeVoteElements(){this.ratingGroupTarget.classList.remove("d-none"),this.averageRatingTarget.classList.add("d-none"),this.noRatingDescriptionTarget.classList.remove("d-none"),this.showRatingTarget.classList.add("d-none"),this.afterVoteTarget.classList.add("d-none"),this.beforeVoteTarget.classList.remove("d-none")}onRatingChange(e){"fst"===e.target.name&&(this.selectedRating=e.target.value,this.submitButtonTarget.classList.remove("d-none"))}submitVote(){this.setCookie("hasVoted","true",365),this.submitButtonTarget.classList.add("d-none"),this.showAfterVoteElements();const e=this.submitButtonTarget.getAttribute("data-page-id"),t=this.averageRatingTarget,a=this.showRatingPercentTarget;i().post(`/rating/static-page/${e}`,{rating:this.selectedRating}).then((function(e){t.textContent=`${t.dataset.average} ${JSON.stringify(e.data.averageRating)}/5 ${t.dataset.votes} ${JSON.stringify(e.data.totalVotes)}`,a.style.left=2*e.data.averageRating*10+"%"})).catch((function(e){console.error("An error occurred")}))}setCookie(e,t,a){let r="";if(a){let e=new Date;e.setTime(e.getTime()+24*a*60*60*1e3),r="; expires="+e.toUTCString()}const s=window.location.pathname;document.cookie=`${e}=${t||""}${r}; path=${s}; SameSite=Lax`}getCookie(e){let t=e+"=",a=document.cookie.split(";");for(let e=0;e<a.length;e++){let r=a[e];for(;" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null}}},99331:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["articlesList","typeUrl","categorySelect","searchBtn","searchField","csrf_token"];connect(){let e=this.typeUrlTarget.dataset.url;""!==e&&(document.cookie="typeUrl="+e+"; path=/;",this.loadArticles(e));let t=document.querySelector("#searchField");t&&(t.addEventListener("blur",(function(){let e=document.querySelector("#searchedArticles");e&&setTimeout((function(){e.classList.add("d-none")}),2e3)})),t.addEventListener("focus",(function(){let e=document.querySelector("#searchedArticles");e&&e.classList.remove("d-none")})))}loadArticles(e){let t=window.location.pathname;i().post(t,{typeUrl:e,isSearch:1}).then((e=>{this.articlesListTarget.innerHTML=e.data})).catch((e=>{console.error(e)}))}searchArticle(e){i().defaults.headers.common["X-CSRF-TOKEN"]=this.csrf_tokenTarget.value;let t=window.location.pathname.split("/");/^page-\d+$/.test(t[t.length-1])&&t.pop();let a=t.join("/");if(!e)return window.location.reload(),!0;i().post(a+"/search-query",{searchQuery:e}).then((e=>{this.articlesListTarget.innerHTML=e.data.data.content,e.data.articlesByView&&this.searchFieldTarget.insertAdjacentHTML("afterEnd",e.data.articlesByView.content)})).catch((e=>{console.error(e)}))}onCategorySelect(e){const t=new Date;t.setTime(t.getTime()+36e5),document.cookie=`typeUrl=${e.currentTarget.dataset.typeUrl}; expires=${t.toUTCString()}; path=/;`,this.loadArticles(e.currentTarget.dataset.typeUrl)}onSearchBtnClick(e){e.preventDefault();let t=this.searchFieldTarget.value;this.searchArticle(t)}onSearchFieldKeyUp(e){clearTimeout(this.typingTimer);let t=e.target.value;this.typingTimer=setTimeout((()=>{this.searchArticle(t)}),1e3)}}},19484:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);a(78797);t.default=class extends r.Qr{static targets=["verifyBtn","domainNameInput","successImage","errorImage","errorBlock","errorMessage","saveBtn","errorValidDomain","domainType"];connect(){this.verifyDomainSendRequest()}verifyDomain(e){e.preventDefault(),this.verifyDomainSendRequest()}domainInput(){this.errorValidDomainTarget.classList.add("d-none"),this.errorImageTarget.style.display="none",this.errorBlockTarget.style.display="none",this.errorMessageTarget.innerHTML="",this.saveBtnTarget.setAttribute("disabled",""),this.saveBtnTarget.classList.add("text-white","btn-light-gray")}verifyDomainSendRequest(){const e=RegExp(/^(?!https?:\/\/)([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/),t=this.domainNameInputTarget.value.trim();if(t){if(!e.test(t))return this.errorValidDomainTarget.classList.remove("d-none"),this.saveBtnTarget.setAttribute("disabled",""),void this.saveBtnTarget.classList.add("text-white","btn-light-gray");let a=document.querySelector("[data-locale]").getAttribute("data-locale");const r=document.getElementById("verifyBtn"),s=r.getAttribute("data-domain-type"),n=r.getAttribute("data-entry-id")??"";i().post("/foreign-domain/verify-domain",`domainName=${encodeURIComponent(t)}&_locale=${a}&domainType=${s}&entryId=${n}`).then((({data:e})=>{if(!Array.isArray(e)||"success"!==e[0])throw new Error;this.successImageTarget.classList.add("d-block"),this.errorImageTarget.style.display="none",this.errorBlockTarget.style.display="none",this.errorMessageTarget.innerHTML="",this.saveBtnTarget.removeAttribute("disabled"),this.saveBtnTarget.classList.remove("text-white","btn-light-gray")})).catch((e=>{this.successImageTarget.classList.remove("d-block"),this.saveBtnTarget.setAttribute("disabled",""),this.saveBtnTarget.classList.add("text-white","btn-light-gray"),this.errorImageTarget.style.display="inline-block",this.errorBlockTarget.style.display="inline-block",e.response.data.error&&(this.errorMessageTarget.innerHTML=e.response.data.error),console.error(e)}))}}}},62264:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["noCards"];timer=null;connect(){this.cards=document.querySelectorAll(".accordion-item"),this.searchInput=document.getElementById("searchBox"),this.searchInput.addEventListener("keyup",this.handleSearch.bind(this))}handleSearch(e){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{const e=document.querySelector('[name="_csrf_token"]').value;i()({method:"get",url:"/faq",headers:{"X-CSRF-TOKEN":e}}),this.timer=null}),1e3);const t=e.target.value.toLowerCase();for(let e=0;e<this.cards.length;e++)this.cards[e].textContent.toLowerCase().includes(t)?this.cards[e].classList.remove("is-hidden"):this.cards[e].classList.add("is-hidden");document.querySelectorAll(".accordion-item.is-hidden").length===this.cards.length?this.noCardsTarget.classList.remove("d-none"):this.noCardsTarget.classList.add("d-none")}}},97713:function(e,t,a){"use strict";a.r(t);var r=a(9669),s=a.n(r),i=a(6599),n=a(36468);t.default=class extends i.Qr{folderModal=new n.Modal("#createFolderModal");static values={logged:String};static targets=["oldFolderName","inputFolderName","closeRenameModal","folderItem","inputCreateErr","deleteFolderName","deleteFolderBtn"];coockieFolderId=document.cookie.split("; ").find((e=>e.includes("folderId")))?.split("=")[1];connect(){this.folderItemTargets.forEach((e=>{e.dataset.folderId==this.coockieFolderId&&(e.classList.toggle("active-folder"),e.querySelector("#folderIc").href.baseVal="/static/pages/admin-img/symbol.svg#icon-open-folder")}));new URLSearchParams(window.location.search).get("archived")&&this.folderItemTargets.forEach((e=>e.classList.add("d-none")))}getFolderName(e){this.oldFolderNameTarget.innerHTML=e.currentTarget.dataset.folder,this.oldFolderNameTarget.dataset.folderId=e.currentTarget.dataset.folderId}renameFolder(){if(!this.inputFolderNameTarget.value.trim().length)return this.inputCreateErrTarget.classList.remove("d-none"),void setTimeout((()=>this.inputCreateErrTarget.classList.add("d-none")),5e3);const e=new FormData;e.append("name",this.inputFolderNameTarget.value);try{s().post(`/folder/edit/${this.oldFolderNameTarget.dataset.folderId}`,e).then((()=>{this.closeRenameModalTarget.click(),window.location.reload()}))}catch(e){}}deleteFolder(e){this.deleteFolderNameTargets.forEach((t=>t.innerHTML=e.currentTarget.dataset.folderName)),this.deleteFolderBtnTarget.dataset.folderId=e.currentTarget.dataset.folderId}deleteFolderBtn(e){e.preventDefault();try{s().post(`/folder/delete/${e.currentTarget.dataset.folderId}`).then((()=>{document.cookie="folderId=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.reload()}))}catch(e){}}openFolder(e){const t=e.currentTarget.dataset.folderId,a=e.currentTarget.dataset.href;if(e.currentTarget!==e.target&&"dataFolder"!==e.target.id&&"dataFolder"!==e.target.parentElement.id)return;const r=document.querySelector(".loaderWrapper");r.classList.remove("d-none"),s()(`/entry/filterByFolder/${t}`).then((()=>{document.cookie="filterByType=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",window.location.href=a})).catch((()=>r.classList.add("d-none")))}closeFolder(){document.cookie="folderId=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}createFolderModal(e){this.loggedValue.length?this.folderModal.show():window.location.href=e.currentTarget.dataset.login}closeModal(){this.folderModal.hide()}downloadFolderInit(e){const t=document.querySelector("#downloadFolderBtn");t&&(t.dataset.folderId=e.target.dataset.folderId,t.dataset.folder=e.target.dataset.folder)}}},44179:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{createCopyBtn(e){this.dispatch("copy",{detail:{qrId:Number(e.currentTarget.dataset.id),qrName:e.currentTarget.dataset.qrName}})}}},84523:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["closeModal","qrName"];storageIsFullModal=null;modal=null;init(e){document.querySelector("#qrIdCopy").dataset.qr=e.detail.qrId,document.querySelector("#qrNameModal").innerHTML=e.detail.qrName}async connect(){this.modal=(await Promise.resolve().then(a.bind(a,36468))).Modal,this.storageIsFullModal=new this.modal("#storage-size-exceeded")}getCookie(e){let t={};return document.cookie.split(";").forEach((function(e){let[a,r]=e.split("=");t[a.trim()]=r})),t[e]}async createCopyModal(e){let t=e.currentTarget.dataset.qr,a=this.getCookie("user_local");void 0===a&&(a="en");try{let{data:e}=await i().get(`/entry/${t}/check/storage`);if("error"===e.status){if("Not enough space"===e.error)return this.closeModalTarget.click(),this.storageIsFullModal.show(),!1;if("Authorization"===e.error)return window.location.href="/login",!1}window.location.href=`${"en"!==a?`/${a}`:""}/entry/${t}/copy`,this.closeModalTarget.click()}catch(e){}}}},46935:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{moveToFolder(e){this.dispatch("copy",{detail:{qrId:Number(e.currentTarget.dataset.id),isPremium:Number(e.currentTarget.getAttribute("data-premium-folder-link")),folderName:e.currentTarget.getAttribute("data-folder-name-link")}})}}},90173:function(e,t,a){"use strict";a.r(t);var r=a(9669),s=a.n(r),i=a(6599),n=a(36468);t.default=class extends i.Qr{static targets=["okBtn","selectFolder","closeModal","input","inputCreateErr","selectFolderErr"];moveToFolderModal=new n.Modal("#moveToFolderModal");moveFromPremiumToRegularFolderModal=new n.Modal("#moveFromPremiumToRegularFolderModal");init(e){document.querySelectorAll("#qrId").forEach((t=>{t.dataset.qr=e.detail.qrId,t.setAttribute("data-is-premium",e.detail.isPremium),t.setAttribute("data-folder-name",e.detail.folderName)}))}move(e){let t=e.target,a=document.querySelector(".title_from_premium_to_regular_folder"),r=this.getCookie("user_local");if(void 0===r&&(r="en"),!1===t.classList.contains("premiumToRegularFolderConfirm")){let s=this.selectFolderTarget.options[this.selectFolderTarget.selectedIndex].getAttribute("data-premium-folder"),i=t.getAttribute("data-folder-name");if("1"===t.getAttribute("data-is-premium")&&""===s){this.moveToFolderModal.hide(),this.moveFromPremiumToRegularFolderModal.show();let t=a.innerHTML.split("/"),s=t[0]+i+t[1];return["ar","he"].includes(r)&&(s=t[1]+i+t[0]),a.innerHTML=s,a.setAttribute("data-folder-id",this.selectFolderTarget.value),a.setAttribute("data-qr-id",e.currentTarget.dataset.qr),!1}this.moveFromPremiumToRegularFolderModal.hide()}let i=a.getAttribute("data-folder-id");if(i>0){try{const e=new FormData;e.append("folderId",i),e.append("_locale",r),s().post(`/entry/folder/${a.getAttribute("data-qr-id")}`,e).then((e=>{let t=e.data;"error"===t.status?(this.selectFolderErrTarget.classList.remove("d-none"),this.selectFolderErrTarget.innerHTML=t.error,setTimeout((()=>window.location.reload()),4e3)):window.location.reload()}))}catch(e){}return!0}if("select"===this.selectFolderTarget.value)return this.selectFolderErrTarget.classList.remove("d-none"),void setTimeout((()=>this.selectFolderErrTarget.classList.add("d-none")),5e3);try{const t=new FormData;t.append("folderId",this.selectFolderTarget.value),s().post(`/entry/folder/${e.currentTarget.dataset.qr}`,t).then((()=>{this.closeModalTarget.click(),window.location.reload()}))}catch(e){}}async createFolder(){if(!this.inputTarget.value.trim().length)return this.inputCreateErrTarget.classList.remove("d-none"),void setTimeout((()=>this.inputCreateErrTarget.classList.add("d-none")),5e3);const e=new FormData;e.append("name",this.inputTarget.value);try{const{data:t}=await s().post("/folder/new",e),a=new FormData;a.append("folderId",t.id);let r=this.okBtnTarget.dataset.qr;r.includes("]")?(r=JSON.parse(r),r.forEach((e=>{a.append("entries[]",e)})),await s().post("/entry/bulk/folder",a)):await s().post(`/entry/folder/${r}`,a),this.closeModalTarget.click(),window.location.reload()}catch(e){}}getCookie(e){let t={};return document.cookie.split(";").forEach((function(e){let[a,r]=e.split("=");t[a.trim()]=r})),t[e]}}},13725:function(e,t,a){"use strict";a.r(t);var r=a(9669),s=a.n(r),i=a(6599);t.default=class extends i.Qr{static targets=["input","closeCreateModal","inputCreateErr","folderDublicateErr"];async create(){if(!this.inputTarget.value.trim().length)return void this.showErrorMsg(this.inputCreateErrTarget);const e=new FormData;e.append("name",this.inputTarget.value);try{const{data:t}=await s().post("/folder/new",e);if(t.error)return void this.showErrorMsg(this.folderDublicateErrTarget);this.closeCreateModalTarget.click(),window.location.reload()}catch(e){}}showErrorMsg(e){e.classList.remove("d-none"),setTimeout((()=>e.classList.add("d-none")),5e3)}}},78219:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static values={newHome:Boolean};gtagClick(e){"appstore"===e.params.label&&dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_get_on_appstore"}),"googleplay"===e.params.label&&dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_get_on_google_play"});let t=e.view.window.location.pathname.replace(/^\//g,"");""===t&&(t="home");const a=`${this.newHomeValue?"new-":""}${t}/${e.params.type}/${e.params.label}`;gtag("event",a,{event_category:t,event_label:a,value:1})}}},21826:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["iframe"];static values={lang:String,type:String};language=this.langValue;connect(){"en"===this.language?this.language="":this.language=this.langValue+"/",setTimeout((()=>this.iframeTarget.setAttribute("src",`${window.location.origin}/${this.language}qr-code-generator/${this.typeValue}/iframe`)),4e3)}}},23366:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["output"];static values={url:String,timeout:Number};connect(){this.request()}async request(){const e=await fetch(this.urlValue);this.outputTarget.innerHTML=await e.text()}}},98752:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["alert"];connect(){this.alertTargets.forEach((e=>{""!==e.textContent.trim()&&this.hideAlertMessage(e,1e4)}))}hideAlertMessage(e,t){e&&(e.style.display="block",setTimeout((()=>{e.style.display="none"}),t))}}},83403:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(88714);t.default=class extends r.Qr{static targets=["list","alertMessage","alert","temporaryKeyAlert","createApiBtn","buyPremiumBtn","keyExpiredAlert","howWorksLink"];static values={premium:Boolean};connect(){s.q&&this.howWorksLinkTarget.remove(),this.loadTokens()}copyToken(e){let t=e.currentTarget,a=t.textContent;navigator.clipboard.writeText(a).then((()=>{let e=t.nextElementSibling;e.style.opacity="1",setTimeout((function(){e.style.opacity="0"}),2e3)}))}deleteToken(e){let t=e.currentTarget;fetch(e.params.urlDelete,{method:"POST",body:JSON.stringify({tokenId:e.params.tokenId})}).then((e=>e.json())).then((e=>{if("success"===e.status){if(t.closest("tr").remove(),this.listTarget.firstElementChild.tBodies[0].rows.length||this.loadTokens(),this.premiumValue)return;this.createApiBtnTarget.classList.remove("d-none"),this.buyPremiumBtnTarget.classList.add("d-none"),this.temporaryKeyAlertTarget.classList.remove("d-none")}}))}createToken(e){let t=this.listTarget.firstElementChild;if(t.tBodies&&t.tBodies[0].rows.length>=3){let e=this.alertMessageTarget;e.style.display="block",setTimeout((function(){e.style.display="none"}),3e3)}else{const t=new FormData,a=document.querySelector("[data-locale]").getAttribute("data-locale");t.append("_locale",a),fetch(e.params.urlCreate,{method:"POST",body:t}).then((e=>e.json())).then((e=>{let t=this.alertTarget;"success"===e.status?(this.loadTokens(),t.classList.remove("d-none"),t.innerHTML=e.message,setTimeout((()=>this.alertTarget.classList.add("d-none")),9e3)):"error"===e.status&&(t.classList.remove("d-none"),t.innerHTML=e.error,setTimeout((()=>this.alertTarget.classList.add("d-none")),9e3))}))}}async loadTokens(){const e=this.listTarget;if(await fetch(this.element.dataset.urlLoad,{method:"POST"}).then((e=>e.text())).then((t=>e.innerHTML=t)),e.firstElementChild.tBodies&&!this.premiumValue&&(this.createApiBtnTarget.classList.add("d-none"),this.buyPremiumBtnTarget.classList.remove("d-none"),document.querySelector(".delete_key").remove()),this.premiumValue)return;const t=document.querySelector(".expire_date");t&&new Date(t.innerHTML.split(".").reverse().join("-"))<new Date?(t.innerHTML=`<small class="px-2 py-1 bg-danger text-danger rounded bg-opacity-10">${t.dataset.expired}<small>`,this.keyExpiredAlertTarget.classList.remove("d-none")):this.temporaryKeyAlertTarget.classList.remove("d-none")}closeAlert(e){e.currentTarget.parentNode.classList.add("d-none")}}},6862:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{connect(){document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector("[data-seconds]");if(e){let t=e.querySelector("span"),a=e.getAttribute("data-seconds"),r=document.querySelector(".register-card-left-btn");r.disabled=!0,r.classList.remove("text-white");let s=setInterval((()=>{a-=1,a<1&&(e.classList.add("d-none"),r.disabled=!1,r.classList.add("text-white")),t.innerHTML=a}),1e3);setTimeout((()=>{clearInterval(s)}),6e4)}}),!1)}}},52117:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(36468);t.default=class extends r.Qr{timeOut=3e4;createQrModal=new s.Modal(this.createQrModalTarget);static targets=["createQrModal"];connect(){setTimeout((()=>this.createQrModal.show()),this.timeOut)}closeCreateQrModal(){this.createQrModal.hide()}}},91993:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(36468);t.default=class extends r.Qr{showModal(e){const t=document.createElement("div");t.innerHTML=`<div class="modal fade" id="youtubeModal" tabindex="-1" aria-labelledby="youtubeModal" aria-hidden="true">\n    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">\n        <div class="modal-content">\n            <div class="modal-body p-0">\n                <div class="ratio ratio-16x9">\n                <iframe width="560" height="315" src="${e.target.dataset.link}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>\n                </div>\n            </div>\n        </div>\n    </div>\n  </div>`,document.body.appendChild(t);new s.Modal(t.querySelector("#youtubeModal")).show(),t.addEventListener("hidden.bs.modal",(()=>{t.querySelector("iframe").src=""}))}}},54974:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(36468);t.default=class extends r.Qr{static targets=["messengerSelect","messengerData","museumForm"];connect(){this.updateMessengerDataState()}updateMessengerDataState(){this.messengerSelectTarget.addEventListener("change",(()=>{this.messengerDataTarget.disabled=""===this.messengerSelectTarget.value}))}showMessage(e,t="danger"){const a=document.getElementById("form-messages");a.innerHTML=`<div class="alert alertMsg alert-${t}">${e}</div>`,setTimeout((()=>{a.innerHTML=""}),3e3)}submitForm(e){e.preventDefault(),this.museumFormTarget.checkValidity()?i()({method:"post",url:"/qr-museum",data:new FormData(this.museumFormTarget),headers:{"X-Requested-With":"XMLHttpRequest"}}).then((e=>{if("success"===e.data.status){const e=document.getElementById("exampleModal"),t=new n.Modal(e);t.show(),setTimeout((()=>{t.hide()}),3e3),this.museumFormTarget.reset()}else this.showMessage(e.data.message)})).catch((e=>{this.showMessage("An error occurred."),console.error(e)})):this.showMessage("Please fill out the required fields.")}}},99418:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{connect(){this.saveScrollPosition(),this.restoreScrollPosition()}saveScrollPosition(){document.querySelector("form").addEventListener("submit",(()=>{localStorage.setItem("formSubmitted","true")})),window.addEventListener("beforeunload",(()=>{localStorage.setItem("scrollPosition",window.pageYOffset.toString())}))}restoreScrollPosition(){window.addEventListener("load",(()=>{const e=localStorage.getItem("scrollPosition"),t=localStorage.getItem("formSubmitted");null!==e&&"true"===t&&(window.scrollTo(0,e),localStorage.removeItem("scrollPosition"),localStorage.removeItem("formSubmitted"))}))}}},22623:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(88714);t.default=class extends r.Qr{static values={newHome:Boolean};connect(){this.checkWebView(),document.querySelectorAll(".lang").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),function(e,t,a){let r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3);const s="expires="+r.toUTCString();document.cookie=e+"="+t+"; "+s+"; path=/"}("user_local",e.currentTarget.hreflang,360),window.location.href=e.currentTarget.href}))}))}gtagClick(e){"create_qr_code"===e.params.label&&dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_create_qr_code_general"}),"qr_scanner"===e.params.label&&dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_QR_Scanner"});let t=e.view.window.location.pathname.replace(/^\//g,"");""===t&&(t="home");const a=`${this.newHomeValue?"new-":""}${t}/${e.params.type}/${e.params.label}`;gtag("event",a,{event_category:t,event_label:a,value:1})}loginBtn(){dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_Login"})}createNewBtn(){dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_Create_New_QR_Code"})}checkWebView(){s.q&&(document.querySelector("#logo-image")?.removeAttribute("href"),["faq","userDomain","importCsv","login","language"].forEach((e=>document.querySelectorAll(`#${e}`).forEach((e=>e.remove())))))}}},48770:function(e,t,a){"use strict";a.r(t);var r=a(6599);a(36468);t.default=class extends r.Qr{static values={newHome:Boolean,userCountry:String,cartsData:String};url="https://www.youtube.com/embed/CGAxjjV6rSs?autoplay=1&amp;modestbranding=1&amp;showinfo=0%22";static targets=["videoModal","videoFrame","dataSrc","cart"];connect(){this.cartsByCountryUpdate(),this.sendOpenEvents();let e=!0;const t=new IntersectionObserver(((t,a)=>{t.forEach((t=>{t.isIntersecting&&e&&(this.dataSrcTargets.forEach((e=>e.src=e.dataset.src)),e=!1)}))}),{rootMargin:"50px 0px 50px"});this.dataSrcTargets.forEach((e=>t.observe(e)))}closeVideoModal(){this.videoModal.hide(),this.videoFrameTarget.src=""}openVideoModal(e){this.videoModal.show(),this.videoFrameTarget.src=this.url,this.gtagClick(e)}gtagClick(e){"try_for_free"===e.params.label&&dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_Try_For_Free"}),"next_step_to_qr_code"===e.params.label&&dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_Next_step_to_QR_code"});let t=e.view.window.location.pathname.replace(/^\//g,"");""===t&&(t="home");const a=`${this.newHomeValue?"new-":""}${t}/${e.params.type}/${e.params.label}`;gtag("event",a,{event_category:t,event_label:a,value:1})}generateNowBtn(){dataLayer.push({event:(this.newHomeValue?"new-":"")+"button_Generate_QR_Now"})}sendOpenEvents(){const e=`open_${this.newHomeValue?"new":"old"}_main`;dataLayer.push({event:e}),gtag("event",e,{event_category:"home",event_label:e,value:1})}cartsByCountryUpdate(){const e=(e,t,a=!0)=>{a&&(e.querySelector(".header-text").innerText=t.title),e.querySelector(".header-img").src=!a&&t.img2?t.img2:t.img,e.querySelector(".header-img").alt=t.label,e.href=t.href,e.dataset.newLandingLabelParam=t.label},t=this.userCountryValue,a=JSON.parse(this.cartsDataValue);e(this.cartTargets[0],a.link),e(this.cartTargets[1],a.pdf),e(this.cartTargets[2],a.image),e(this.cartTargets[3],a.text),e(this.cartTargets[4],a.whatsapp,!1),e(this.cartTargets[5],a.youtube,!1),e(this.cartTargets[6],a.audio),e(this.cartTargets[7],a.store),e(this.cartTargets[8],a.wifi),"SI"===t?(e(this.cartTargets[0],a.text),e(this.cartTargets[1],a.store),e(this.cartTargets[2],a.audio),e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.map,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.instagram),e(this.cartTargets[8],a.facebook)):"TH"===t?(e(this.cartTargets[3],a.store),e(this.cartTargets[4],a.map,!1),e(this.cartTargets[6],a.facebook),e(this.cartTargets[7],a.instagram),e(this.cartTargets[8],a.audio)):"ID"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.store,!1),e(this.cartTargets[5],a.text,!1),e(this.cartTargets[6],a.map),e(this.cartTargets[7],a.youtube),e(this.cartTargets[8],a.email)):"MY"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.map,!1),e(this.cartTargets[6],a.instagram),e(this.cartTargets[7],a.facebook),e(this.cartTargets[8],a.telegram)):"VN"===t||"UA"===t?(e(this.cartTargets[3],a.store),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.audio,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.map),e(this.cartTargets[8],a.youtube)):"IN"===t||"SA"===t||"PH"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.store,!1),e(this.cartTargets[5],a.text,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.map),e(this.cartTargets[8],a.youtube)):"CO"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.store,!1),e(this.cartTargets[5],a.text,!1),e(this.cartTargets[7],a.linkList),e(this.cartTargets[8],a.youtube)):"KR"===t||"AT"===t?(e(this.cartTargets[3],a.store),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.audio,!1),e(this.cartTargets[6],a.youtube),e(this.cartTargets[7],a.instagram),e(this.cartTargets[8],a.facebook)):"MX"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.linkList,!1),e(this.cartTargets[6],a.map),e(this.cartTargets[7],a.youtube),e(this.cartTargets[8],a.instagram)):"EG"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.audio,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.map),e(this.cartTargets[8],a.youtube)):"DE"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.store,!1),e(this.cartTargets[5],a.text,!1),e(this.cartTargets[7],a.map),e(this.cartTargets[8],a.youtube)):"TW"===t?(e(this.cartTargets[4],a.audio,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.map),e(this.cartTargets[8],a.facebook)):"HK"===t?(e(this.cartTargets[4],a.audio,!1),e(this.cartTargets[6],a.instagram),e(this.cartTargets[7],a.facebook),e(this.cartTargets[8],a.map)):"FR"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.audio,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.youtube),e(this.cartTargets[8],a.instagram)):"OM"===t?(e(this.cartTargets[3],a.whatsapp),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.audio,!1),e(this.cartTargets[6],a.map),e(this.cartTargets[7],a.youtube),e(this.cartTargets[8],a.instagram)):"KH"===t?(e(this.cartTargets[3],a.store),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.vcard,!1),e(this.cartTargets[6],a.linkList),e(this.cartTargets[7],a.map),e(this.cartTargets[8],a.youtube)):"MN"===t?(e(this.cartTargets[4],a.youtube,!1),e(this.cartTargets[5],a.instagram,!1),e(this.cartTargets[6],a.vcard),e(this.cartTargets[7],a.facebook),e(this.cartTargets[8],a.audio)):"UZ"===t?(e(this.cartTargets[3],a.store),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[5],a.audio,!1),e(this.cartTargets[6],a.map),e(this.cartTargets[7],a.youtube),e(this.cartTargets[8],a.instagram)):"CZ"===t?(e(this.cartTargets[4],a.audio,!1),e(this.cartTargets[6],a.instagram),e(this.cartTargets[7],a.vcard),e(this.cartTargets[8],a.linkList)):"BG"===t&&(e(this.cartTargets[3],a.store),e(this.cartTargets[4],a.text,!1),e(this.cartTargets[6],a.instagram),e(this.cartTargets[7],a.vcard),e(this.cartTargets[8],a.facebook))}}},11609:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s),n=a(36468),o=a(20296),l=a.n(o);const c=["storage_100mb_month","storage_100mb_year","storage_300mb_month","storage_300mb_year","storage_500mb_month","storage_500mb_year","storage_1gb_month","storage_1gb_year","storage_10gb_month","storage_10gb_year","storage_100gb_month","storage_100gb_year","storage_1tb_month","storage_1tb_year","storage_10tb_month","storage_10tb_year"];t.default=class extends r.Qr{static values={multisub:Boolean,typeText:String,notFound:String};QRCodeStyling=null;plansData={};coupon="";promocodeInfo={};storagePrice=0;storageMultiSub={monthType:null,yearType:null,monthKey:"",yearKey:""};modalPrice={};liteMiddlewareUrl="";currentStoragePlan=void 0;currentCurrency="usd";symbol={usd:"$",brl:"R$",eur:"€",gbp:"£",idr:"Rp",inr:"₹",sar:"SR",thb:"฿",vnd:"₫",uah:"₴"};isModalDataLoading=!1;currentStepModalData=1;totalStepCountModalData=1;isInitModalAsSubscribeMode=!0;static targets=["premiumYear","liteYear","premium","lite","currencySelect","chooseModal","wrongPromo","noActivePromo","clickableRow","errorManage","liteQrSelectModal","changeQrErr","annually","monthly","annuallyLabel","monthlyLabel","promoForm","storageMB","storagePrice","storageRange","storageUsed","saveLite","savePremium","storageWarning","storageDanger","cancelSubscription","promoField","editPromoForm","yearCostBtn","monthCostBtn","storageMonthYear","switchYearMonth","storageType","storageChoice","extendStorageBtn","storageTariffPrice","changeQrLiteBtn","buyLiteBtn","selectPlan","selectPeriod","selectPlanPrice","storageMultiSubPrice","selectStoragePeriod","subscribeMultisubBtn","selectPlanPriceWithoutCoupon","modalSearch"];chooseQrModal=new n.Modal(this.chooseModalTarget);liteQrSelectModal=new n.Modal(this.liteQrSelectModalTarget);cancelSubscriptionModal=new n.Modal(document.getElementById("cancelSubscription"));qrOrderIdLiteModal=null;qrIdLiteModal=null;async connect(){this.checkModalScroll(),this.changeMultisubPlan(),await i()("/get-all-plans-with-storage").then((({data:e})=>{this.plansData=e,this.setData("usd")})),this.setStorageTariffPrice(),this.currencySelectTarget.value="usd";document.getElementById("lite-qr-select").addEventListener("hidden.bs.modal",(()=>{this.resetLiteQrSelectModal()}));const e=100*this.storageRangeTarget.value/this.storageRangeTarget.max;this.storageUsedTarget.innerText=e.toFixed(2),e>=90?(this.storageDangerTarget.classList.remove("d-none"),this.storageRangeTarget.style.setProperty("--color","#F44336")):e>=80&&(this.storageWarningTarget.classList.remove("d-none"),this.storageRangeTarget.style.setProperty("--color","#E1B02F")),this.resetStorageSlider(),this.resetPlanSwitch(),this.QRCodeStyling=(await a.e(9330).then(a.t.bind(a,9330,23))).default,this.searchQr=await l()(this.searchQr.bind(this),1e3)}resetPlanSwitch(){this.annuallyLabelTarget.classList.add("fw-bold"),this.annuallyLabelTarget.classList.add("text-gray"),this.annuallyLabelTarget.classList.add("text-dark"),this.monthlyLabelTarget.classList.remove("fw-bold"),this.monthlyLabelTarget.classList.remove("text-gray"),this.monthlyLabelTarget.classList.remove("text-dark"),this.switchYearMonthTarget.checked=!1,this.switchYearMonthTarget.removeAttribute("checked")}setStorageTariffPrice(){const e=this.storageTariffPriceTarget,t=e.dataset.tariff?this.plansData[e.dataset.tariff].find((e=>e.currency===this.currentCurrency)).amount:0;e.innerHTML=`${this.symbol[this.currentCurrency]}${t}`}setData(e){this.liteYearTargets.forEach((t=>this.setPrice(t,this.plansData.lite_year,e))),this.premiumYearTargets.forEach((t=>this.setPrice(t,this.plansData.premium_year,e))),this.liteTargets.forEach((t=>this.setPrice(t,this.plansData.lite_month,e))),this.premiumTargets.forEach((t=>this.setPrice(t,this.plansData.premium_month,e))),this.calculateSavePrice(e)}calculateSavePrice(e){const t=this.plansData.lite_year.find((t=>t.currency===e)).amount,a=(12*this.plansData.lite_month.find((t=>t.currency===e)).amount-t).toFixed();this.saveLiteTarget.innerHTML=`${this.symbol[e]}${a}`;const r=this.plansData.premium_year.find((t=>t.currency===e)).amount,s=(12*this.plansData.premium_month.find((t=>t.currency===e)).amount-r).toFixed();this.savePremiumTarget.innerHTML=`${this.symbol[e]}${s}`}setPrice(e,t,a){const r=t.find((e=>e.currency===a)).amount;e.innerHTML=`${this.symbol[a]}${r}`}selectCurrency(e){this.resetPremiumCouponLink(),this.setData(e.target.value),this.currentCurrency=e.target.value,this.resetStorageSlider(),this.setStorageTariffPrice(),this.changeMultisubPlan(),this.updateCouponPrices()}resetPremiumCouponLink(){if(this.multisubValue)return;const e=`&coupon=${this.coupon}`;this.yearCostBtnTarget.dataset.middlewareUrl=this.yearCostBtnTarget.dataset.middlewareUrl.replace(e,""),this.monthCostBtnTarget.dataset.middlewareUrl=this.monthCostBtnTarget.dataset.middlewareUrl.replace(e,"")}getPrice(e){const t=e.find((e=>e.currency===this.currencySelectTarget.value)).amount;return{symbol:this.symbol[this.currencySelectTarget.value],amount:t}}buyLightSubscription(e){this.liteMiddlewareUrl=e.currentTarget.dataset.middlewareUrl,this.checkoutLite()}showLiteModal(e){this.isInitModalAsSubscribeMode=!0,this.liteMiddlewareUrl=e.currentTarget.dataset.middlewareUrl,1!=this.liteQrSelectModalTarget.dataset.loaded?this.loadQrSelectModalContent({qrId:null,isChangeQrAction:!1}):this.buyLiteBtnTarget.classList.remove("d-none")}checkoutLite(){let e="";const t=this.promocodeInfo?.value,a=this.promocodeInfo?.isActive,r=this.promocodeInfo?.limit;t&&a&&r>0&&(/type=lite_year/.test(this.liteMiddlewareUrl)&&this.promocodeInfo.products.lite_year||/type=lite_month/.test(this.liteMiddlewareUrl)&&this.promocodeInfo.products.lite_month)&&(e=this.coupon?`&coupon=${this.coupon}`:""),window.location.href=`${this.liteMiddlewareUrl.replace("/null?",`/${this.qrIdLiteModal}?`)}${e}&currency=${this.currentCurrency}`}checkout(e){window.location.href=e.currentTarget.dataset.middlewareUrl+`&currency=${this.currentCurrency}`}async manageSubscription(e){const t=e.target.dataset;let a=this.getCookie("test_payment");a=void 0===a?0:parseInt(a);let r=new FormData;r.append("order_id",t.order),r.append("test",a),r.append("return_url",t.adminUrl),r.append("ajax_mode",1),r.append("plan_id",t.plan);try{this.errorManageTarget.classList.add("d-none");const{data:e}=await i().post(t.url,r,{headers:{"Content-Type":"multipart/form-data"}});e.hasOwnProperty("url")?window.location.href=e.url:this.errorManageTarget.classList.remove("d-none")}catch(e){this.errorManageTarget.classList.remove("d-none")}this.cancelSubscriptionModal.hide()}async cancelSubscription(e){const t=e.target.dataset;this.errorManageTarget.classList.add("d-none");try{const{data:e}=await i().post(t.url,{order_id:t.order,user_token:t.userToken,order_type:t.plan});e.ok?window.location.reload():this.errorManageTarget.classList.remove("d-none")}catch(e){this.errorManageTarget.classList.remove("d-none")}this.cancelSubscriptionModal.hide()}getCookie(e){let t={};return document.cookie.split(";").forEach((function(e){let[a,r]=e.split("=");t[a.trim()]=r})),t[e]}liteQrSelect(e){this.isInitModalAsSubscribeMode=!1;let t=this.liteQrSelectModalTarget.dataset.loaded;const a=e.currentTarget.dataset.qrId,r=e.currentTarget.dataset.qrOrderId;if(this.qrOrderIdLiteModal=r,this.qrIdLiteModal=a,1!=t)this.loadQrSelectModalContent({qrId:a,isChangeQrAction:!0});else{this.changeQrLiteBtnTarget.classList.remove("d-none");document.querySelectorAll(".qr-item").forEach((e=>{if(a==e.dataset.qrId){const t=e.querySelector("input");t.checked=!0,t.setAttribute("checked",""),e.classList.add("border-primary"),this.qrIdLiteModal=e.dataset.qrId}}))}}async loadQrSelectModalContent({qrId:e,isChangeQrAction:t,searchParam:a}){(t?this.changeQrLiteBtnTarget:this.buyLiteBtnTarget).classList.remove("d-none");const r=this.liteQrSelectModalTarget.querySelector("#qrSelectLiteContent");1===this.currentStepModalData&&(r.innerHTML='<div class="d-flex justify-content-center align-items-center" style="height: 200px;" id="loadingSpinner">\n        <div class="spinner-border text-gray" role="status">\n            <span class="visually-hidden">Loading...</span>\n        </div>\n    </div>'),this.isModalDataLoading=!0;try{const{data:t}=await i()(`/ajax/entry/user-entry-data?revert_result=1&step=${this.currentStepModalData}${a?`&entry_title=${a}`:""}`);if(this.modalSearchTarget.classList.remove("d-none"),1!==this.currentStepModalData&&1==this.liteQrSelectModalTarget.dataset.loaded||(r.innerHTML=""),this.currentStepModalData+=1,this.totalStepCountModalData=t.pagination.totalStepCount,!t.data.length)return void(r.innerHTML=`<div class="text-center my-4 text-gray">${this.notFoundValue}</div>`);t.data.forEach((t=>{r.innerHTML+=`<div class="qr-item form-check border rounded-1 mb-3 p-2 d-flex align-items-center ${e==t.id?"border-primary":""}" data-qr-id='${t.id}'>\n        <label class="form-check-label ps-3" for="flexRadioDefault${t.id}">\n          <div class="row align-items-center">\n            <div class="col-1">\n              <input class="form-check-input m-0 p-0" type="radio" name="flexRadioDefault" id="flexRadioDefault${t.id}" ${e==t.id?"checked":""}>\n            </div>\n            <div class="col-3">\n              ${t.image?`<div class="d-flex justify-content-center align-items-center h-100""><img src="${t.image}" class="w-100"></div>`:`<div class="qrcode d-flex justify-content-center align-items-center h-100" data-link="${t.link}"></div>`}\n            </div>\n            <div class="col-8">\n              <div class="fw-bold">${t.title}</div>\n              <div class="overflow-hidden">\n                  <span class="text-gray me-2">URL:</span>\n                  <span>${t.link}</span>\n              </div>\n              <div>\n                  <span class="text-gray me-2">${this.typeTextValue}:</span>\n                  <span>${t.type}</span>\n              </div>\n            </div>\n          </div>\n      </label>\n  </div>`})),r.querySelectorAll(".qrcode").forEach((e=>{e.innerHTML="",new this.QRCodeStyling({data:e.dataset.link}).append(e)})),this.liteQrSelectModalTarget.dataset.loaded=1;const s=document.querySelectorAll(".qr-item");s.forEach((e=>{e.addEventListener("click",(t=>{s.forEach((e=>{e.classList.remove("border-primary");e.querySelector("input").removeAttribute("checked")})),t.currentTarget.classList.add("border-primary");const a=t.currentTarget.querySelector("input");a.checked=!0,a.setAttribute("checked",""),this.qrIdLiteModal=e.dataset.qrId}))}))}catch(e){}finally{this.loadingSpinnerShow(!1),this.isModalDataLoading=!1}}checkModalScroll(){const e=document.querySelector("#qrSelectLiteContent");e.addEventListener("scroll",(()=>{!this.isModalDataLoading&&this.currentStepModalData<=this.totalStepCountModalData&&e.scrollHeight-e.scrollTop<=e.clientHeight+100&&(this.loadingSpinnerShow(!0),this.loadQrSelectModalContent({qrId:this.isInitModalAsSubscribeMode?null:this.qrIdLiteModal,isChangeQrAction:!this.isInitModalAsSubscribeMode}))}))}loadingSpinnerShow(e){const t=document.querySelector("#qrSelectLiteContent");let a=document.createElement("div");if(a.innerHTML='<div class="text-center" id="loadingSpinner">\n    <div class="spinner-border text-gray" role="status">\n        <span class="visually-hidden">Loading...</span>\n    </div>\n</div>',e)t.appendChild(a);else{const e=t.querySelector("#loadingSpinner");e?.parentNode.removeChild(e)}}async saveLiteQrSelect(){try{await i().post(`/subscription/change-lite/order/${this.qrOrderIdLiteModal}/qr/${this.qrIdLiteModal}/`),this.liteQrSelectModal.hide(),window.location.reload()}catch(e){this.showErrorMsg(this.changeQrErrTarget)}}resetLiteQrSelectModal(){this.qrOrderIdLiteModal=null,this.qrIdLiteModal=null,this.changeQrLiteBtnTarget.classList.add("d-none"),this.buyLiteBtnTarget.classList.add("d-none");document.querySelectorAll(".qr-item").forEach((e=>{const t=e.querySelector("input");t.removeAttribute("checked"),t.checked=!1,e.classList.remove("border-primary")}))}showErrorMsg(e){e.classList.remove("d-none"),setTimeout((()=>e.classList.add("d-none")),5e3)}switchPlans(e){this.toggleSwitchPlans(e.target.checked)}toggleSwitchPlans(e){const t=e?"add":"remove",a=e?"remove":"add";this.monthlyLabelTarget.classList[t]("fw-bold","text-gray","text-dark"),this.annuallyLabelTarget.classList[a]("fw-bold","text-gray","text-dark"),this.monthlyTargets.forEach((e=>{e.classList[a]("d-none")})),this.annuallyTargets.forEach((e=>{e.classList[t]("d-none")})),this.storageMonthYearTargets.forEach((t=>t.innerHTML=this.storageMonthYearTarget.dataset[e?"month":"year"])),this.resetStorageSlider()}resetStorageSlider(){this.storageChoiceTargets.forEach((e=>{e.value=0})),this.storagePriceTargets.forEach((e=>e.innerHTML=`${this.symbol[this.currentCurrency]}0`)),this.currentStoragePlan=void 0,this.storageMBTargets.forEach((e=>e.innerHTML=0)),this.extendStorageBtnTargets.forEach((e=>e.disabled=!0)),this.storageMultiSubPriceTargets.forEach((e=>e.innerHTML=`${this.symbol[this.currentCurrency]}0`)),this.storageMultiSub={monthType:null,yearType:null,monthKey:"",yearKey:""}}showPromo(){this.promoFormTarget.classList.toggle("d-none")}handleDetails(e){const t=e.currentTarget,a=t.querySelector("span"),r=t.querySelector(".tariff-details-img");a.innerHTML=t.innerText.trim()===t.dataset.hideText?t.dataset.showText:t.dataset.hideText,t.previousElementSibling.classList.toggle("d-none"),t.previousElementSibling.classList.contains("d-none")?r.classList.remove("rotate"):r.classList.add("rotate")}changeSlider(e){let t,a;this.storageChoiceTargets.forEach((t=>{t.value=e.target.value}));const r=this.switchYearMonthTarget.checked;let s=["",""];switch(e.target.value){case"0":t=0,a=0,s=["",""];break;case"1":t=100,s=[c[0],c[1]],a=this.plansData[`${r?c[0]:c[1]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"2":t=300,s=[c[2],c[3]],a=this.plansData[`${r?c[2]:c[3]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"3":t=500,s=[c[4],c[5]],a=this.plansData[`${r?c[4]:c[5]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"4":t=1e3,s=[c[6],c[7]],a=this.plansData[`${r?c[6]:c[7]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"5":t=1e4,s=[c[8],c[9]],a=this.plansData[`${r?c[8]:c[9]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"6":t=1e5,s=[c[10],c[11]],a=this.plansData[`${r?c[10]:c[11]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"7":t=1e6,s=[c[12],c[13]],a=this.plansData[`${r?c[12]:c[13]}`].find((e=>e.currency===this.currentCurrency)).amount;break;case"8":t=1e7,s=[c[14],c[15]],a=this.plansData[`${r?c[14]:c[15]}`].find((e=>e.currency===this.currentCurrency)).amount}this.storagePrice=a,this.storageMultiSub={monthType:this.storageTypeTarget.children[Number(e.target.value)]?.dataset.monthType,yearType:this.storageTypeTarget.children[Number(e.target.value)]?.dataset.yearType,monthKey:s[0],yearKey:s[1]},this.extendStorageBtnTargets.forEach((t=>t.disabled=0===Number(e.target.value))),this.currentStoragePlan=this.storageTypeTarget.children[Number(e.target.value)]?.dataset[r?"monthType":"yearType"],this.storageMBTargets.forEach((e=>e.innerHTML=t)),this.storagePriceTargets.forEach((e=>e.innerHTML=`${this.symbol[this.currentCurrency]}${a}`)),this.multisubValue&&this.changeStorageMultiSub()}extendStorage(e){if(!this.currentStoragePlan)return;const t=`${e.currentTarget.dataset.middlewareUrl}?currency=${this.currentCurrency}`;if(this.multisubValue){const e=this.selectStoragePeriodTarget.options[this.selectStoragePeriodTarget.selectedIndex].dataset.quantity,a=this.storageMultiSub[`${this.selectStoragePeriodTarget.options[this.selectStoragePeriodTarget.selectedIndex].dataset.type}Type`];window.location.href=`${t}&type=${a}&quantity=${e}`}else window.location.href=`${t}&type=${this.currentStoragePlan}`}openSubscriptionModal(e){this.cancelSubscriptionTarget.dataset.plan=e.currentTarget.dataset.plan,this.cancelSubscriptionTarget.dataset.order=e.currentTarget.dataset.order}async checkPromo(){const e=this.promoFieldTarget.value;try{const{data:t}=await i().post("/subscription/check-promocode",e),a=t.promocodeInfo?.value,r=t.promocodeInfo?.isActive,s=t.promocodeInfo?.limit;if(a&&r&&s>0){this.promocodeInfo=t.promocodeInfo;const a=Object.keys(this.promocodeInfo.products).reduce(((e,t)=>e+(t.includes("month")?1:-1)),0);a<0?(this.switchYearMonthTarget.checked=!1,this.switchYearMonthTarget.removeAttribute("checked"),this.toggleSwitchPlans(!1)):a>0&&(this.switchYearMonthTarget.checked=!0,this.switchYearMonthTarget.setAttribute("checked",""),this.toggleSwitchPlans(!0)),this.editPromoFormTarget.querySelector("#promoValue").innerText=e,this.promoFormTarget.classList.add("d-none"),this.editPromoFormTarget.classList.remove("d-none"),this.updateCouponPrices(),this.changeMultisubPlan()}else!1!==r&&t.promocodeInfo.length||(this.noActivePromoTarget.classList.remove("d-none"),setTimeout((()=>{this.noActivePromoTarget.classList.add("d-none")}),3e3))}catch(e){this.wrongPromoTarget.classList.remove("d-none"),setTimeout((()=>{this.wrongPromoTarget.classList.add("d-none")}),3e3)}}updateCouponPrices(){if(0===Object.keys(this.promocodeInfo).length)return;const e=this.promocodeInfo.value,t=this.promocodeInfo.products,a=this.promoFieldTarget.value,r=this.symbol[this.currencySelectTarget.value],s=this.plansData.lite_year.find((e=>e.currency===this.currencySelectTarget.value)).amount,i=this.plansData.premium_year.find((e=>e.currency===this.currencySelectTarget.value)).amount,n=this.plansData.lite_month.find((e=>e.currency===this.currencySelectTarget.value)).amount,o=this.plansData.premium_month.find((e=>e.currency===this.currencySelectTarget.value)).amount,l=parseInt(this.saveLiteTarget.innerText.match(/\d+/)[0],10),c=parseInt(this.savePremiumTarget.innerText.match(/\d+/)[0],10);t.lite_year&&(document.querySelector("#liteYear").innerText=`${r}${(s-s*e/100).toFixed(2)}`,this.saveLiteTarget.innerText=`${r}${(l+s*e/100).toFixed(2)}`),t.premium_year&&(this.multisubValue||(this.yearCostBtnTarget.dataset.middlewareUrl+="&coupon="+a),document.querySelector("#premiumYear").innerText=`${r}${(i-i*e/100).toFixed(2)}`,this.savePremiumTarget.innerText=`${r}${(c+i*e/100).toFixed(2)}`),t.lite_month&&(document.querySelector("#liteMonth").innerText=`${r}${(n-n*e/100).toFixed(2)}`),t.premium_month&&(this.multisubValue||(this.monthCostBtnTarget.dataset.middlewareUrl+="&coupon="+a),document.querySelector("#premiumMonth").innerText=`${r}${(o-o*e/100).toFixed(2)}`),this.coupon=a}editPromo(){this.resetPremiumCouponLink(),this.coupon="",this.promocodeInfo={},this.editPromoFormTarget.classList.add("d-none"),this.editPromoFormTarget.querySelector("#promoValue").innerText="",this.promoFormTarget.classList.remove("d-none"),this.setData(this.currentCurrency),this.changeMultisubPlan()}async changeMultisubPlan(){if(!this.multisubValue)return;this.subscribeMultisubBtnTarget.classList.modal("disabled");const e=this.selectPeriodTarget.options[this.selectPeriodTarget.selectedIndex],t={type_key:`${this.selectPlanTarget.value}_${e.dataset.type}`,currency:this.currentCurrency,quantity:Number(e.dataset.quantity)};this.coupon&&(t.coupon=this.coupon);try{const{data:e}=await i().post("/api/stripe/get-subscription-amount",t);this.selectPlanPriceTarget.innerHTML=`${this.symbol[this.currentCurrency]}${e.data.amount}`,this.selectPlanPriceWithoutCouponTarget.innerHTML=e.data.amount_without_discount?`${this.symbol[this.currentCurrency]}${e.data.amount_without_discount}`:""}catch(e){}finally{this.subscribeMultisubBtnTarget.classList.remove("disabled")}}changeStorageMultiSubPeriod(e){this.selectStoragePeriodTargets.forEach((t=>{t.selectedIndex=e.target.selectedIndex})),this.changeStorageMultiSub()}changeStorageMultiSub(){const e=this.selectStoragePeriodTarget.options[this.selectStoragePeriodTarget.selectedIndex],t=this.plansData[this.storageMultiSub[`${e.dataset.type}Key`]]?.find((e=>e.currency===this.currentCurrency)).amount||0;this.storageMultiSubPriceTargets.forEach((a=>{a.innerHTML=`${this.symbol[this.currentCurrency]}${(t*e.dataset.quantity).toFixed(2)}`}))}checkoutMultiSub(e){const t=this.selectPeriodTarget.options[this.selectPeriodTarget.selectedIndex];if("lite"===this.selectPlanTarget.value){if(this.liteMiddlewareUrl=`${e.target.dataset[`middleware${this.selectPlanTarget.value}Url`]}?type=lite_${t.dataset.type}&quantity=${t.dataset.quantity}`,!e.target.dataset.isuserentries)return void this.checkoutLite();this.liteQrSelectModal.show(),this.isInitModalAsSubscribeMode=!0,1!=this.liteQrSelectModalTarget.dataset.loaded?this.loadQrSelectModalContent({qrId:null,isChangeQrAction:!1}):this.buyLiteBtnTarget.classList.remove("d-none")}else{let a=e.target.dataset[`middleware${this.selectPlanTarget.value}Url`]+`?currency=${this.currentCurrency}&type=premium_${t.dataset.type}&quantity=${t.dataset.quantity}`;const r=this.getPremiumCouponGetParam(a);window.location.href=`${a}${r}`}}getPremiumCouponGetParam(e){const t=this.promocodeInfo?.isActive,a=this.promocodeInfo?.limit;let r="";return t&&a>0&&(/type=premium_year/.test(e)&&this.promocodeInfo.products.premium_year||/type=premium_month/.test(e)&&this.promocodeInfo.products.premium_month)&&(r=this.coupon?`&coupon=${this.coupon}`:""),r}multiSubscribeNavigate(){document.cookie="multiSub=1",window.location.reload()}regularSubscribeNavigate(){document.cookie="multiSub=0",window.location.reload()}async searchQr(e){this.currentStepModalData=1,this.totalStepCountModalData=1,this.loadQrSelectModalContent({qrId:this.isInitModalAsSubscribeMode?null:this.qrIdLiteModal,isChangeQrAction:!this.isInitModalAsSubscribeMode,searchParam:e.target.value})}}},97302:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static values={newHome:Boolean};static targets=["liteYear","premiumYear","saveLiteYear","lite","premium","saveLite","savePremium","free","monthlyPlan","annualPlan","getPremiumYearBtn","getPremiumMonthBtn","getLiteYearBtn","getLiteMonthBtn"];symbol={usd:"$",brl:"R$",eur:"€",gbp:"£",idr:"Rp",inr:"₹",sar:"SR",thb:"฿",vnd:"₫",uah:"₴"};liteYearPrice=0;premiumPrice=0;plansData={};connect(){i()("/get-all-plans").then((({data:e})=>{this.plansData=e,this.setData("usd")}))}setData(e){this.setPrice(this.liteYearTargets,this.plansData.lite_year,e,!0),this.setPrice(this.premiumYearTargets,this.plansData.premium_year,e,!0),this.setPrice(this.liteTargets,this.plansData.lite_month,e,!1),this.setPrice(this.premiumTargets,this.plansData.premium_month,e,!1),this.calculateSavePrice(e),this.freeTargets.forEach((t=>t.innerHTML=`${this.symbol[e]}0`)),this.setCheckoutLinks(e)}setPrice(e,t,a,r){const s=t.find((e=>e.currency===a)).amount;e.forEach((e=>{const t=r?(s/12).toFixed(2):s;e.innerHTML=`${this.symbol[a]}${t}`}))}calculateSavePrice(e){const t=this.plansData.lite_year.find((t=>t.currency===e)).amount,a=(12*this.plansData.lite_month.find((t=>t.currency===e)).amount-t).toFixed();this.saveLiteTargets.forEach((t=>{t.innerHTML=`${this.symbol[e]}${a}`}));const r=this.plansData.premium_year.find((t=>t.currency===e)).amount,s=(12*this.plansData.premium_month.find((t=>t.currency===e)).amount-r).toFixed();this.savePremiumTargets.forEach((t=>{t.innerHTML=`${this.symbol[e]}${s}`}))}toggle(e){this.setData(e.target.value)}selectMonthPlan(){this.monthlyPlanTargets.forEach((e=>{e.classList.add("d-none")})),this.annualPlanTargets.forEach((e=>{e.classList.remove("d-none")}))}selectAnnualPlan(){this.monthlyPlanTargets.forEach((e=>{e.classList.remove("d-none")})),this.annualPlanTargets.forEach((e=>{e.classList.add("d-none")}))}setCheckoutLinks(e){this.getPremiumYearBtnTargets.forEach((t=>{t.href=`/subscription/payment-middleware?currency=${e}&type=premium_year`})),this.getPremiumMonthBtnTargets.forEach((t=>{t.href=`/subscription/payment-middleware?currency=${e}&type=premium_month`})),this.getLiteYearBtnTargets.forEach((t=>{t.href=`/subscription/lite-middleware/null?currency=${e}&type=lite_year`})),this.getLiteMonthBtnTargets.forEach((t=>{t.href=`/subscription/lite-middleware/null?currency=${e}&type=lite_month`}))}getPlanBtn(e){dataLayer.push({event:`${this.newHomeValue?"new-":""}button_get_${e.params.label}`})}multiSubscribeNavigate(e){const t=document.querySelector("[data-locale]").getAttribute("data-locale");document.cookie=`multiSub=1; path=${"en"===t?"":`/${t}`}/subscription`,window.location.href=e.target.dataset.href}}},42435:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(6599);class s{_code;_symbol;_decimalSeparator;constructor(e,t,a){this._code=e,this._symbol=t,this._decimalSeparator=a}get code(){return this._code}get symbol(){return this._symbol}get decimalSeparator(){return this._decimalSeparator}}var i=a(9669),n=a.n(i);class o{_currencyCodeKey="code";_currencySignKey="sign";_currencyDecimalSeparatorKey="decimalSeparator";_currencyData={};loadCurrenciesData(){n()("/get-all-currencies").then((({data:e})=>{this._currencyData=e}))}getAllCurrencies(){let e=[];if(this._currencyData.length<=0)return e;for(const t in this._currencyData){const a=this._currencyData[t];if("object"==typeof a){const t=a[this._currencyCodeKey],r=a[this._currencySignKey],i=a[this._currencyDecimalSeparatorKey];if("string"==typeof t&&"string"==typeof r&&"string"==typeof i)return null;e.push(new s(t,r,i))}}return e}getCurrencyByCode(e){const t=this.getAllCurrencies().find((t=>t.code===e));return void 0!==t?t:null}}class l{premiumYearPlanKey="premium_year";premiumMonthPlanKey="premium_month";liteYearPlanKey="lite_year";liteMonthPlanKey="lite_month";_plansData={};loadPriceData(){n()("/get-all-plans").then((({data:e})=>{this._plansData=e}))}getPricePlanByCurrency(e,t){const a=this._plansData[e];if(!a)return null;for(const e in a){const r=a[e];if("object"==typeof r){const e=r.currency,a=r.amount;if("string"==typeof e&&"number"==typeof a&&e===t)return a}}return null}getPremiumYearPriceByCurrency(e){return this.getPricePlanByCurrency(this.premiumYearPlanKey,e)}getPremiumMonthPriceByCurrency(e){return this.getPricePlanByCurrency(this.premiumMonthPlanKey,e)}getLiteYearPriceByCurrency(e){return this.getPricePlanByCurrency(this.liteYearPlanKey,e)}getLiteMonthPriceByCurrency(e){return this.getPricePlanByCurrency(this.liteMonthPlanKey,e)}}class c{static purchaseBtnClass="purchase-btn";static premiumYearPriceTextClass="premium-year-price";static premiumMonthPriceTextClass="premium-month-price";static liteYearPriceTextClass="lite-year-price";static liteMonthPriceTextClass="lite-month-price";static premiumYearPerMonthPriceTextClass="premium-year-price-per-month";static liteYearPerMonthPriceTextClass="lite-year-price-per-month";static premiumAmountSavingTextClass="premium-amount-saving";static liteAmountSavingTextClass="lite-amount-saving"}class d{replaceCurrencyForPurchaseButton(e){const t=document.getElementsByClassName(c.purchaseBtnClass);for(const a of t){const t=a.getAttribute("href");if(!t){console.error("Link attribute not found for purchase button");continue}const r=/currency=([a-z]{3})/,s=t.replace(r,`currency=${e}`);a.setAttribute("href",s)}}replacePricingOnPage(e,t,a,r,s){this._setPriceByElementClass(c.premiumYearPriceTextClass,s.symbol,e),this._setPriceByElementClass(c.premiumMonthPriceTextClass,s.symbol,t),this._setPriceByElementClass(c.liteYearPriceTextClass,s.symbol,a),this._setPriceByElementClass(c.liteMonthPriceTextClass,s.symbol,r),this._setPriceByElementClass(c.premiumYearPerMonthPriceTextClass,s.symbol,this.calcYearPricePerMonth(e,s.decimalSeparator)),this._setPriceByElementClass(c.liteYearPerMonthPriceTextClass,s.symbol,this.calcYearPricePerMonth(a,s.decimalSeparator)),this._setPriceByElementClass(c.premiumAmountSavingTextClass,s.symbol,this.calcAmountSaving(e,t,s.decimalSeparator)),this._setPriceByElementClass(c.liteAmountSavingTextClass,s.symbol,this.calcAmountSaving(a,r,s.decimalSeparator))}calcYearPricePerMonth(e,t){return Number((e/12).toFixed(t))}calcAmountSaving(e,t,a){return Number((12*t-e).toFixed(a))}_setPriceByElementClass(e,t,a){const r=document.getElementsByClassName(e);for(const e of r)e.textContent=`${t+a}`}}var h=class extends r.Qr{constructor(e){super(e),this._currencyService=new o,this._pricePlanService=new l,this._productPriceService=new d}connect(){this._currencyService.loadCurrenciesData(),this._pricePlanService.loadPriceData()}changeCurrencyHandler(e){const t=e.target.value,a=this._currencyService.getCurrencyByCode(t);if(!a)return void console.error(`Selected currency '${t}' is not valid`);const r=this._pricePlanService.getPremiumYearPriceByCurrency(t),s=this._pricePlanService.getPremiumMonthPriceByCurrency(t),i=this._pricePlanService.getLiteYearPriceByCurrency(t),n=this._pricePlanService.getLiteMonthPriceByCurrency(t);r&&s&&i&&n?(this._productPriceService.replaceCurrencyForPurchaseButton(a.code),this._productPriceService.replacePricingOnPage(r,s,i,n,a)):console.error(`Failed to getting prices for '${a.code}' currency`)}}},21071:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["form","mdc","allProducts","product","emailFieldInput","messageError","messageSuccess"];connect(){this.mdcTargets.forEach((e=>{new mdc.textField.MDCTextField(e)}))}send(e){if(e.preventDefault(),this.dispatch("send",{detail:{target:e.currentTarget}}).detail.isValid){let t=new FormData(this.formTarget);this.appendEmails(t),fetch(e.params.url,{method:"POST",body:t}).then((e=>e.json())).then((e=>{"success"===e.status?(this.messageSuccessTarget.style.display="block",setTimeout((function(){window.location.href=e.url}),2e3)):this.messageErrorTarget.style.display="block"}))}}delete(e){if(e.preventDefault(),confirm("Вы уверены что хотите удалить промокод?")){let t=e.params.id;fetch(e.params.url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({ids:[t]})}).then((e=>e.json())).then((e=>{"success"===e.status?(this.messageSuccessTarget.firstElementChild.textContent="Промокод успешно удален",this.messageSuccessTarget.style.display="block",setTimeout((function(){window.location.href=e.redirectUrl}),2e3)):this.messageErrorTarget.style.display="block"}))}}appendEmails(e){if(0!==this.emailFieldInputTarget.textContent.trim().length){let t=this.emailFieldInputTarget.textContent.trim();t=t.split(/(\s+)/);let a=[];t.forEach((e=>{0!==e.trim().length&&a.push(e)})),e.append("emails",JSON.stringify(a))}}markProducts(e){e.preventDefault();let t=e.currentTarget.getElementsByTagName("input")[0];if("0"===t.value){let e=t.checked=!0!==t.checked;this.productTargets.forEach((t=>{t.getElementsByTagName("input")[0].checked=e}))}else t.checked=!0!==t.checked,this.productTargets.forEach((e=>{let t=e.getElementsByTagName("input")[0];"0"===t.value&&(t.checked=!1)}))}toggleAllProducts(){const e=this.allProductsTarget.checked;this.productTargets.forEach((t=>{t.checked=e}))}checkIndividualProduct(){const e=this.productTargets.every((e=>e.checked));this.allProductsTarget.checked=e}validateProductSelection(e){this.productTargets.some((e=>e.checked))||(alert("You must select at least one product"),e.preventDefault())}}},56857:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["emailField","emailFieldLabel","emailFieldInput"];static classes=["emailFieldActive","emailFieldLabelActive"];focusEmailField(){this.emailFieldTarget.classList.add(this.emailFieldActiveClass),this.emailFieldLabelTarget.classList.add(this.emailFieldLabelActiveClass)}focusoutEmailField(){0===this.emailFieldInputTarget.textContent.trim().length&&(this.emailFieldTarget.classList.remove(this.emailFieldActiveClass),this.emailFieldLabelTarget.classList.remove(this.emailFieldLabelActiveClass))}formatEmails(e){"Space"===e.code?this.highlightEmails(e):13===e.keyCode&&e.preventDefault()}pasteEmails(e){e.preventDefault(),this.highlightEmails(e)}highlightEmails(e){let t=this.emailFieldInputTarget.textContent.trim(),a=void 0!==e.clipboardData?(e.clipboardData||window.clipboardData).getData("text").trim():"";if(t=t.concat(" ",a),0!==t.length){this.emailFieldInputTarget.innerHTML="",t=t.trim().split(/(\s+)/),t.forEach((e=>{if(0!==e.trim().length){let t=this.createFormattedEmail(e);this.emailFieldInputTarget.appendChild(t)}}));let e=document.createElement("span");e.style.display="inline-block",e.innerHTML="&nbsp;",e.contentEditable="true",this.emailFieldInputTarget.appendChild(e);let a=window.getSelection(),r=document.createRange();r.setStart(e,0),r.setEnd(e,0),a.removeAllRanges(),a.addRange(r)}}createFormattedEmail(e){let t=document.createElement("span");t.className="email",t.innerHTML=e.trim()+"&nbsp;",t.contentEditable="false";let a=document.createElement("i");return a.classList.add("fa","fa-times","email-icon-close"),a.addEventListener("click",(()=>{this.removeEmail(a)})),t.append(a),t}removeEmailAction(e){let t=e.currentTarget;this.removeEmail(t)}removeEmail(e){e.parentElement.remove();let t=this.emailFieldInputTarget.getElementsByTagName("span"),a=t[t.length-1],r=window.getSelection(),s=document.createRange();s.setStart(a,0),s.setEnd(a,0),r.removeAllRanges(),r.addRange(s)}}},80491:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["required"];static classes=["mdcFieldInvalid"];validate(e){let t,a,r=e.detail;t=0!==r?r.target:e.currentTarget,a=t.getAttribute("name");let s=!0;for(let e of this.requiredTargets)if(("submit"===a&&e.hasAttribute("required")||t===e||0!==e.value.trim().length)&&(s=this.validateElement(e),!s))break;0!==r&&(r.isValid=s)}validateElement(e){let t,a,r=!0,s=e.getAttribute("name"),i=e.value.trim();switch(s){case"code":t=/^[A-Za-z\d]{0,10}$/,a="Только буквы цифры не больше 10 символов";break;case"value":case"limit":t=/^\d+$/,a="Только цифры";break;case"expiration-date":t=null,a=""}let n=e.parentElement.nextElementSibling;return 0===i.length||null===t||t.test(i)?0===i.length?(e.hasAttribute("required")&&e.parentElement.classList.add(this.mdcFieldInvalidClass),null!==n&&(n.style.display="none"),r=!1):null!==n&&(n.style.display="none"):(e.parentElement.classList.add(this.mdcFieldInvalidClass),a&&(n.textContent=a,n.style.display="block"),r=!1),r}}},45571:function(e,t,a){"use strict";a.r(t);var r=a(6599);t.default=class extends r.Qr{static targets=["tab","list","checkboxAll","menu"];static classes=["tab","tabActive","promocodeCheckbox"];tabFilter(e){this.element.getElementsByClassName(this.tabActiveClass)[0].classList.remove(this.tabActiveClass),e.currentTarget.classList.add(this.tabActiveClass),this.loadPromocodes(e.params.filter)}loadPromocodes(e){let t=window.location.pathname.split("?")[0];history.pushState({},null,t),fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({tabFilter:e})}).then((e=>e.text())).then((e=>this.listTarget.innerHTML=e))}edit(e){e.target.classList.contains(this.promocodeCheckboxClass)||(e.preventDefault(),window.location.href=e.params.url)}checkAll(e){let t=this.listTarget.querySelectorAll("."+this.promocodeCheckboxClass),a=!!e.currentTarget.checked;t.forEach((e=>{e.checked=a}))}delete(e){e.preventDefault();let t=this.listTarget.querySelectorAll("."+this.promocodeCheckboxClass),a=[];t.forEach((e=>{e.checked&&a.push(e.dataset.id)})),0===a.length?alert("Промокод не выбран"):fetch(e.params.url,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({ids:a})}).then((e=>e.json())).then((e=>{let t=this.element.getElementsByClassName(this.tabActiveClass)[0].dataset.filter;this.loadPromocodes(t);let a=this.menuTarget.getElementsByClassName(this.tabClass);for(let t of a){let a=t.dataset.filter;if(a in e.count){t.getElementsByTagName("span")[0].textContent=e.count[a]}}}))}}},10732:function(e,t,a){"use strict";a.r(t);var r=a(9669),s=a.n(r),i=a(6599);t.default=class extends i.Qr{static targets=["qrCount"];connect(){this.qrCountTargets.forEach((e=>{e.style.cssText+="opacity: 0"})),s().get("/qr-count").then((({data:e})=>{this.qrCountTargets.forEach((t=>{t.style.cssText+="opacity: 1",t.innerHTML=e}))}))}}},17051:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{validEmail=/^(\w{2,100})+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,10})+$/;static targets=["input","form","checkbox"];async addEmail(e){if(e.preventDefault(),!this.validEmail.test(this.inputTarget.value))return void this.alertMessage("Incorrect email address","alert-danger");const t=new FormData(this.formTarget);try{const{data:a}=await i().post(e.params.url,t);this.inputTarget.value="",!0===a?.mail_send&&(this.alertMessage("Email created","alert-success"),window.location.reload()),!1===a?.subscribed&&this.alertMessage("Email already added","alert-danger")}catch(e){this.alertMessage(e.response.data?.title,"alert-danger")}}alertMessage(e,t){const a=document.createElement("div");a.innerHTML=`<div class="alert ${t}">${e}</div>`,this.element.prepend(a),setTimeout((()=>a.remove()),5e3)}async setMailingSubscribe(e){const t=e.currentTarget.value,a=e.currentTarget.checked;e.preventDefault();try{await i()(`/mailing/edit/${t}?active=${a?1:0}`),this.checkboxTargets.find((e=>e.value==t)).checked=a}catch(e){console.log(e)}}}},22026:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static values={newHome:Boolean};validEmail=/^(\w{2,100})+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,10})+$/;static targets=["input","message","form"];async addEmail(e){if(e.preventDefault(),!this.validEmail.test(this.inputTarget.value))return this.messageTarget.innerText="Incorrect email address",void this.inputTarget.classList.add("border-danger");let t=e.view.window.location.pathname.replace(/^\//g,"");""===t&&(t="home");const a=`${this.newHomeValue?"new-":""}${t}/button/subscribe`;gtag("event",a,{event_category:t,event_label:a,value:1}),this.messageTarget.innerText="",this.inputTarget.classList.remove("border-danger");const r=new FormData(this.formTarget);try{const{data:t}=await i().post(e.params.url,r);this.inputTarget.value="",!0===t?.mail_send&&(this.messageTarget.innerText="You have subscribed to the news. Confirm your email",dataLayer.push({event:(this.newHomeValue?"new-":"")+"subscribed_form_sent"})),!1===t?.subscribed&&(this.messageTarget.innerText="You are already subscribed"),!1===t?.csrf_token&&(this.messageTarget.innerText="Invalid CSRF token"),setTimeout((()=>this.messageTarget.innerText=""),5e3)}catch(e){this.messageTarget.innerText=e.response.data?.title||"Something went wrong. Try again",setTimeout((()=>this.messageTarget.innerText=""),5e3)}}handleInput(){this.messageTarget.innerText="",this.inputTarget.classList.remove("border-danger")}}},16647:function(e,t,a){"use strict";a.r(t);var r=a(6599),s=a(9669),i=a.n(s);t.default=class extends r.Qr{static targets=["read_more","skip_ad"];google=null;getUserGeo=null;entry_id=null;scanCoordinates=null;lat=null;lng=null;isExactRequired=null;locationEntryRestrictions=null;seconds=5;docId=null;async connect(){this.google=await a.e(3834).then(a.t.bind(a,43834,23)),this.getUserGeo=await a.e(9683).then(a.t.bind(a,49683,23)),this.entry_id=document.querySelector("[data-entry_id]").getAttribute("data-entry_id");let e=new URLSearchParams(window.location.search);if(this.lat=e.get("lat"),this.lng=e.get("lng"),this.lat&&this.lng&&(this.scanCoordinates={lat:this.lat,lng:this.lng}),document.querySelector("[data-locationEntryRestrictions]")&&(this.locationEntryRestrictions=1),this.locationEntryRestrictions){if(navigator.geolocation){let e=document.querySelector("[data-isExactRequired]");e&&(this.isExactRequired=e.getAttribute("data-isExactRequired")),navigator.geolocation.getCurrentPosition((e=>{this.scanCoordinates={lat:e.coords.latitude,lng:e.coords.longitude},this.collectStatistic(this.scanCoordinates)}),(e=>{this.isExactRequired&&e.code===e.PERMISSION_DENIED&&(window.location.href="/restrictions/location/geo-restriction-denied"),this.collectStatistic()}))}}else await this.collectStatistic(this.scanCoordinates)}onRead(){let e=document.querySelector("#article"),t=this.read_moreTarget;e.style.height?(e.style="",t.children[0].innerHTML=t.dataset.less,t.children[1].querySelector("img").style.transform="rotate(180deg)"):(e.style.height="850px",e.style.overflowY="hidden",e.scrollIntoView(),t.children[0].innerHTML=t.dataset.more,t.children[1].querySelector("img").style.transform="rotate(0deg)")}async increaseSkipAd(){let e=setInterval((()=>{let t=this.skip_adTarget;if(t){t.getAttribute("data-docid")&&clearInterval(e)}}),1e3)}async collectStatistic(e=null){let t=null;const a=new FormData;a.append("scanCoordinates",e);let{data:r}=await i().post(`/statistic/collect/${this.entry_id}`,a);if(r){let e=this.skip_adTarget;e&&e.setAttribute("data-docid",r),t=r,setInterval((()=>{this.sayHi(this.entry_id,r)}),1e3)}return t}sayHi(e,t){let a=document.querySelector("#seconds");0===this.seconds?void 0!==t&&setTimeout((()=>{this.collectEarn(e,t)}),1):seconds>0&&(a.innerHTML=this.seconds.toString()),this.seconds--}async collectEarn(e,t){await i().post(`/statistic/user-earn/${e}/${t}`)}}},55704:function(e,t,a){"use strict";function r(){let e={};document.cookie.split(";").forEach((function(t){let[a,r]=t.split("=");e[a.trim()]=r}));const t=e.user_local;return void 0===t||"en"===t?"":`/${t}`}a.r(t),a.d(t,{default:function(){return r}})},78797:function(e,t,a){"use strict";a.d(t,{G8:function(){return c},JB:function(){return o},Lu:function(){return l},W4:function(){return s},dp:function(){return i},tI:function(){return n},u$:function(){return r}});const r=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),s=(RegExp("^(?:(?:http|https)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$"),RegExp(/^\+?([0-9]{2})\)?[-. ]?([0-9]{4})[-. ]?([0-9]{4})$/),RegExp(/^[0-9 +]{8,20}$/),RegExp(/^([a-zA-Z]+:\/\/)?(?:www\.)?[a-zA-Z0-9-]*[a-zA-Z0-9-](\.[a-zA-Z0-9-]{2,}|:\d{2,5})/)),i=RegExp(/@([-+]?[0-9\.]+),([-+]?[0-9\.]+),([0-9z]+)/),n=RegExp(/^https?:\/\/goo\.gl\/maps\/[a-zA-Z0-9]{17}$/),o=RegExp(/^https?:\/\/maps\.app\.goo\.gl\/.*$/),l=new RegExp(/^\s*[\w.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\s*(,\s*[\w.-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}\s*)*$/),c=RegExp(/^[a-zA-Z]+:\/\/[a-zA-Z0-9-]{2,}/)},81882:function(e,t,a){"use strict";a.r(t),a.d(t,{app:function(){return i}});var r=a(42192),s=a(58982);const i=(0,r.x)(a(37338));i.register("password-visibility",s.Z)},10826:function(e,t,a){"use strict";a.d(t,{B4:function(){return v},Dc:function(){return c},Ll:function(){return l},PS:function(){return p},Sl:function(){return d},UF:function(){return h},ej:function(){return f},gS:function(){return T},kR:function(){return m},qH:function(){return o},qY:function(){return u},td:function(){return y},ug:function(){return g}});var r=a(9669),s=a.n(r),i=a(48764),n=a(78797);const o=async e=>{const t=await fetch(e),a=await t.blob();return new Promise((e=>{const t=new FileReader;t.readAsDataURL(a),t.onloadend=()=>{const a=t.result;e(a)}}))},l=(e,t="file")=>{const a=e.split(",");if(a.length<2)return;const r=a[0].match(/:(.*?);/);if(!r||r.length<2)return;const s=r[1],n=i.lW.from(a[1],"base64");return new File([n],t,{type:s})},c=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||window.safari.pushNotification).toString()||/iPad|iPhone/i.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>0,d=async(e,t,a)=>{if(e.length)try{const{data:r}=await s()("/entry/file/storage_size");if(null!==r.storageSize){if(e.reduce(((e,t)=>e+t.fileSize),0)+r.usedStorageSize>=r.storageSize)return a(),void t([]);t(e)}else t(e)}catch(e){console.log(e)}else t([])},h=(e,t,a)=>{let r=e.trim();n.W4.test(r)&&r.length<=255?(t(!0),/^[a-zA-Z]+:\/\//.test(r)||(r=`http://${r}`)):t(!1),a(r)},u=async(e,t)=>{const a=e.split(/[#?]/)[0].split(".").pop().trim();const r=await fetch(e),s=await r.blob();return new File([s],t+"."+a,{type:s.type})},g="edit"!==window.location.href.slice(window.location.href.lastIndexOf("/")+1,window.location.href.length),m=async e=>{if(e&&e.includes("/qr/logo/")){return await o(e)}return e},p=function(e){return new Promise(((t,a)=>{const r=JSON.parse(window.sessionStorage.getItem("retry-lazy-refreshed")||"false");e().then((e=>{window.sessionStorage.setItem("retry-lazy-refreshed","false"),t(e)})).catch((e=>{if(!r)return window.sessionStorage.setItem("retry-lazy-refreshed","true"),window.location.reload();a(e)}))}))},T=async e=>{if(e){const t=document.createElement("canvas"),a=t.getContext("2d"),r=await(async e=>new Promise((t=>{const a=new Image;a.crossOrigin="anonymous",a.src=e,a.onload=()=>t(a),a.onerror=()=>t(null)})))(e);return null===r?(t.width=1,t.height=1,a.fillStyle="#ffffff",a.fillRect(0,0,1,1)):(t.width=r.width,t.height=r.height,a.drawImage(r,0,0)),t.toDataURL()}return null},y=e=>{const t=new RegExp("<image\\s+([^>]*\\s)?href=[\"']?\\s*data:image[^\"']*[\"']?([^>]*)/>","g"),a=e.match(t)[0].replace("href","xlink:href");return e.replace(t,a)},f=e=>{const t=document.cookie.split(";");for(let a=0;a<t.length;a++){const r=t[a].trim();if(r.startsWith(e+"="))return decodeURIComponent(r.substring(e.length+1))}return null},v=e=>{const t=e.trim();return t.startsWith("http")?n.W4.test(t.trim()):n.G8.test(t.trim())}},88714:function(e,t,a){"use strict";a.d(t,{K:function(){return r},q:function(){return s}});let r="?bannerid=4900689189",s=window.webview}}]);